import{d as v,j as dt,D as ut,k as ht,o as r,c as x,w as o,b as n,a as e,g as We,L as _t,f as u,e as d,h as Xe,v as mt,B as pt,t as s,F as Ze,i as c,y as N}from"./app.3552a682.js";import{_ as gt}from"./AppLayout.5bf918e8.js";import{_ as vt}from"./Breadcrumb.a4ce8470.js";import{_ as yt}from"./Button.f17634a2.js";import{_ as h}from"./SecondaryButton.a7a553b9.js";import{_ as et}from"./DangerButton.14914416.js";import{_ as ft,a as bt,b as xt}from"./Pagination.11e01a24.js";import{a as D}from"./DialogModal.f5e76d37.js";import"./_plugin-vue_export-helper.cdc0426e.js";const kt=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Control Card ",-1),wt={class:"py-12"},zt={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},St={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},Ct={class:"flex items-center justify-between"},$t={class:"flex flex-row space-x-2"},Nt=c("Detail"),Dt=c("Create"),At=c("Delete"),Mt=c("Approve"),jt={key:0,class:"w-4 p-4"},Yt={class:"flex items-center"},Bt=["id","value"],It=["for"],Ot={scope:"row",class:"px-6 py-4 font-medium text-gray-900 dark:text-white whitespace-nowrap"},Vt={class:"px-6 py-4"},Lt={class:"px-6 py-4"},Ft={key:1,class:"px-6 py-4"},Tt=["href"],qt={key:2,class:"px-6 py-4"},Pt={key:3,class:"px-6 py-4"},Et={key:4,class:"px-6 py-4"},Ut=c(" Approve Note "),Gt=c(" Cancel "),Ht=c(" Approve "),Jt=c(" Detail Service Order "),Kt={class:"w-full overflow-x-scroll text-sm text-left mt-4 text-gray-500 dark:text-gray-400"},Qt={class:"hover:bg-gray-50"},Rt=e("th",{class:"capitalize px-6 py-4 font-medium"},"service order no",-1),Wt={class:"hover:bg-gray-50"},Xt=e("th",{class:"capitalize px-6 py-4 font-medium"},"status",-1),Zt={class:"hover:bg-gray-50"},es=e("th",{class:"capitalize px-6 py-4 font-medium"},"supervisor",-1),ts={class:"hover:bg-gray-50"},ss=e("th",{class:"capitalize px-6 py-4 font-medium"},"foreman PIC",-1),os={class:"hover:bg-gray-50"},as=e("th",{class:"capitalize px-6 py-4 font-medium"},"serviceman",-1),ls={class:"hover:bg-gray-50"},rs=e("th",{class:"capitalize px-6 py-4 font-medium"},"segment",-1),ns={class:"hover:bg-gray-50"},cs=e("th",{class:"capitalize px-6 py-4 font-medium"},"operation",-1),is={class:"hover:bg-gray-50"},ds=e("th",{class:"capitalize px-6 py-4 font-medium"},"job code",-1),us={class:"hover:bg-gray-50"},hs=e("th",{class:"capitalize px-6 py-4 font-medium"},"component code",-1),_s={class:"hover:bg-gray-50"},ms=e("th",{class:"capitalize px-6 py-4 font-medium"},"smu",-1),ps={class:"hover:bg-gray-50"},gs=e("th",{class:"capitalize px-6 py-4 font-medium"},"warranty?",-1),vs={key:0,class:"hover:bg-gray-50"},ys=e("th",{class:"capitalize px-6 py-4 font-medium"},"warranty",-1),fs={class:"hover:bg-gray-50"},bs=e("th",{class:"capitalize px-6 py-4 font-medium"},"pip/psp",-1),xs={class:"hover:bg-gray-50"},ks=e("th",{class:"capitalize px-6 py-4 font-medium"},"job control",-1),ws={class:"hover:bg-gray-50"},zs=e("th",{class:"capitalize px-6 py-4 font-medium"},"business area",-1),Ss={class:"hover:bg-gray-50"},Cs=e("th",{class:"capitalize px-6 py-4 font-medium"},"customer name",-1),$s={class:"hover:bg-gray-50"},Ns=e("th",{class:"capitalize px-6 py-4 font-medium"},"service team",-1),Ds={class:"hover:bg-gray-50"},As=e("th",{class:"capitalize px-6 py-4 font-medium"},"group number",-1),Ms={class:"hover:bg-gray-50"},js=e("th",{class:"capitalize px-6 py-4 font-medium"},"customer no",-1),Ys={class:"hover:bg-gray-50"},Bs=e("th",{class:"capitalize px-6 py-4 font-medium"},"make",-1),Is={class:"hover:bg-gray-50"},Os=e("th",{class:"capitalize px-6 py-4 font-medium"},"model",-1),Vs={class:"hover:bg-gray-50"},Ls=e("th",{class:"capitalize px-6 py-4 font-medium"},"serial number",-1),Fs={class:"hover:bg-gray-50"},Ts=e("th",{class:"capitalize px-6 py-4 font-medium"},"arrg no",-1),qs={class:"hover:bg-gray-50"},Ps=e("th",{class:"capitalize px-6 py-4 font-medium"},"std hours",-1),Es={class:"hover:bg-gray-50"},Us=e("th",{class:"capitalize px-6 py-4 font-medium"},"job description",-1),Gs={class:"hover:bg-gray-50"},Hs=e("th",{class:"capitalize px-6 py-4 font-medium"},"labor hours",-1),Js={class:"hover:bg-gray-50"},Ks=e("th",{class:"capitalize px-6 py-4 font-medium"},"date sent",-1),Qs={class:"hover:bg-gray-50"},Rs=e("th",{class:"capitalize px-6 py-4 font-medium"},"date required",-1),Ws={class:"hover:bg-gray-50"},Xs=e("th",{class:"capitalize px-6 py-4 font-medium"},"date returned",-1),Zs={class:"hover:bg-gray-50"},eo=e("th",{class:"capitalize px-6 py-4 font-medium"},"date received_back",-1),to={class:"hover:bg-gray-50"},so=e("th",{class:"capitalize px-6 py-4 font-medium"},"date segment closed",-1),oo={class:"hover:bg-gray-50"},ao=e("th",{class:"capitalize px-6 py-4 font-medium"},"receive by",-1),lo={class:"hover:bg-gray-50"},ro=e("th",{class:"capitalize px-6 py-4 font-medium"},"surplus part returned",-1),no={class:"hover:bg-gray-50"},co=e("th",{class:"capitalize px-6 py-4 font-medium"},"sims completed",-1),io={class:"hover:bg-gray-50"},uo=e("th",{class:"capitalize px-6 py-4 font-medium"},"note",-1),ho={class:"hover:bg-gray-50"},_o=e("th",{class:"capitalize px-6 py-4 font-medium"},"deliver to",-1),mo={class:"hover:bg-gray-50"},po=e("th",{class:"capitalize px-6 py-4 font-medium"},"return to",-1),go={class:"hover:bg-gray-50"},vo=e("th",{class:"capitalize px-6 py-4 font-medium"},"signed 1?",-1),yo={class:"hover:bg-gray-50"},fo=e("th",{class:"capitalize px-6 py-4 font-medium"},"signed 2?",-1),bo={class:"hover:bg-gray-50"},xo=e("th",{class:"capitalize px-6 py-4 font-medium"},"servicemen",-1),ko=c(" Close "),wo=c(" Delete Note "),zo=c(" Cancel "),So=c(" Delete Notes "),Io={__name:"Index",props:{so:Object,data:Object,search:String},setup(t){var M;const _=t,i=v([]),tt=dt(()=>i.value.length==_.data.data.length),k=()=>i.value.length=0,st=a=>{a?i.value=_.data.data.map(f=>f.id):k()},w=v(!1),z=v(!1),S=v(!1),ot=()=>S.value=!0,A=()=>S.value=!1,at=()=>w.value=!0,C=()=>w.value=!1,lt=()=>z.value=!0,$=()=>z.value=!1,y=v(["Date","Note","Serviceman","Attachment"]),rt=[{label:"Service Order",url:route("service-orders.index")},{label:(M=_.so)==null?void 0:M.service_order_no,url:null},{label:"Control Card",url:null}],nt=a=>{N.Inertia.get(route("control-cards.index",_.so.id),{search:a},{preserveState:!0,preserveScroll:!0})},ct=()=>{N.Inertia.delete(route("control-cards.destroy",{service_order:_.so.id,control_card:i.value,data:i.value}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{C(),k()}})},it=()=>{N.Inertia.put(route("control-cards.approve"),{data:i.value},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{$(),k()}})};return ut(()=>{const a=ht().props.value.user;["serviceman","foreman"].includes(a.role)?(y.value.push("Foreman Approved?"),y.value.push("Supervisor Approved?")):["supervisor"].includes(a.role)&&y.value.push("Approved?")}),(a,f)=>(r(),x(gt,{title:"Control Card"},{header:o(()=>[kt,n(vt,{links:rt})]),default:o(()=>[e("div",wt,[e("div",zt,[e("div",St,[n(xt,{columns:y.value,checkbox:["foreman","supervisor","serviceman"].includes(a.$page.props.user.role),action:[].includes(a.$page.props.user.role),onSelectAllToggle:st,checkboxState:We(tt)},{header:o(()=>[e("div",Ct,[n(ft,{placeholder:"Note",search:t.search,onSearch:nt},null,8,["search"]),e("div",$t,[n(h,{onClick:ot},{default:o(()=>[Nt]),_:1}),["serviceman"].includes(a.$page.props.user.role)&&a.$page.props.so.serviceman_id==a.$page.props.user.id&&a.$page.props.so.status!="done"?(r(),x(We(_t),{key:0,href:a.route("control-cards.create",t.so.id)},{default:o(()=>[n(yt,null,{default:o(()=>[Dt]),_:1})]),_:1},8,["href"])):u("",!0),["foreman","supervisor","serviceman"].includes(a.$page.props.user.role)?(r(),x(h,{key:1,disabled:i.value.length==0,onClick:at},{default:o(()=>[At]),_:1},8,["disabled"])):u("",!0),["foreman","supervisor"].includes(a.$page.props.user.role)?(r(),x(h,{key:2,disabled:i.value.length==0,onClick:lt},{default:o(()=>[Mt]),_:1},8,["disabled"])):u("",!0)])])]),tbody:o(()=>[(r(!0),d(Ze,null,Xe(t.data.data,l=>{var m,p,g;return r(),d("tr",{key:l,class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[["foreman","supervisor","serviceman"].includes(a.$page.props.user.role)?(r(),d("td",jt,[e("div",Yt,[mt(e("input",{id:`checkbox-table-${l.id}`,value:l.id,"onUpdate:modelValue":f[0]||(f[0]=b=>i.value=b),type:"checkbox",class:"w-4 h-4 text-yellow-600 bg-gray-100 border-gray-300 rounded focus:ring-yellow-500 dark:focus:ring-yellow-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,Bt),[[pt,i.value]]),e("label",{for:`checkbox-table-${l.id}`,class:"sr-only"},"checkbox",8,It)])])):u("",!0),e("th",Ot,s(new Date(l.created_at).toLocaleString("id-ID")),1),e("td",Vt,s((m=l.special_note)!=null?m:"-"),1),e("td",Lt,s((g=(p=l.reporter)==null?void 0:p.name)!=null?g:"-"),1),l.attachments.length?(r(),d("td",Ft,[e("a",{href:l.attachments[0].path,class:"text-xs text-orange-500",target:"_blank"},"Open in New Tab",8,Tt)])):(r(),d("td",qt,"No")),["serviceman","foreman"].includes(a.$page.props.user.role)?(r(),d("td",Pt,s(l.is_approved?"Yes":"No"),1)):u("",!0),["serviceman","foreman","supervisor"].includes(a.$page.props.user.role)?(r(),d("td",Et,s(l.is_accepted?"Yes":"No"),1)):u("",!0)])}),128))]),footer:o(()=>[n(bt,{links:t.data.links,next:t.data.next_page_url,prev:t.data.prev_page_url},null,8,["links","next","prev"])]),_:1},8,["columns","checkbox","action","checkboxState"])])])]),n(D,{show:z.value,onClose:$},{title:o(()=>[Ut]),content:o(()=>[c(" Are you sure you want to approve the selected notes? You selected "+s(i.value.length)+" notes. ",1)]),footer:o(()=>[n(h,{onClick:$},{default:o(()=>[Gt]),_:1}),n(et,{class:"ml-3",onClick:it},{default:o(()=>[Ht]),_:1})]),_:1},8,["show"]),n(D,{show:S.value,onClose:A},{title:o(()=>[Jt]),content:o(()=>{var l,m,p,g,b,j,Y,B,I,O,V,L,F,T,q,P,E,U,G,H,J,K,Q,R,W,X,Z,ee,te,se,oe,ae,le,re,ne,ce,ie,de,ue,he,_e,me,pe,ge,ve,ye,fe,be,xe,ke,we,ze,Se,Ce,$e,Ne,De,Ae,Me,je,Ye,Be,Ie,Oe,Ve,Le,Fe,Te,qe,Pe,Ee,Ue,Ge,He,Je,Ke,Qe;return[e("table",Kt,[e("tbody",null,[e("tr",Qt,[Rt,e("td",null,s((m=(l=t.so)==null?void 0:l.service_order_no)!=null?m:"-"),1)]),e("tr",Wt,[Xt,e("td",null,s((g=(p=t.so)==null?void 0:p.service_order_status)!=null?g:"-"),1)]),e("tr",Zt,[es,e("td",null,s((Y=(j=(b=t.so)==null?void 0:b.supervisor)==null?void 0:j.name)!=null?Y:"-"),1)]),e("tr",ts,[ss,e("td",null,s((O=(I=(B=t.so)==null?void 0:B.foreman)==null?void 0:I.name)!=null?O:"-"),1)]),e("tr",os,[as,e("td",null,s((F=(L=(V=t.so)==null?void 0:V.serviceman)==null?void 0:L.name)!=null?F:"-"),1)]),e("tr",ls,[rs,e("td",null,s((q=(T=t.so)==null?void 0:T.segment)!=null?q:"-"),1)]),e("tr",ns,[cs,e("td",null,s((E=(P=t.so)==null?void 0:P.operation)!=null?E:"-"),1)]),e("tr",is,[ds,e("td",null,s((G=(U=t.so)==null?void 0:U.job_code)!=null?G:"-"),1)]),e("tr",us,[hs,e("td",null,s((J=(H=t.so)==null?void 0:H.component_code)!=null?J:"-"),1)]),e("tr",_s,[ms,e("td",null,s((Q=(K=t.so)==null?void 0:K.smu)!=null?Q:"-"),1)]),e("tr",ps,[gs,e("td",null,s((R=t.so)!=null&&R.warranty?"Yes":"No"),1)]),(W=t.so)!=null&&W.warranty?(r(),d("tr",vs,[ys,e("td",null,s((Z=(X=t.so)==null?void 0:X.warranty_text)!=null?Z:"-"),1)])):u("",!0),e("tr",fs,[bs,e("td",null,s((te=(ee=t.so)==null?void 0:ee.pip_psp)!=null?te:"-"),1)]),e("tr",xs,[ks,e("td",null,s((oe=(se=t.so)==null?void 0:se.job_control)!=null?oe:"-"),1)]),e("tr",ws,[zs,e("td",null,s((le=(ae=t.so)==null?void 0:ae.business_area)!=null?le:"-"),1)]),e("tr",Ss,[Cs,e("td",null,s((ne=(re=t.so)==null?void 0:re.customer_name)!=null?ne:"-"),1)]),e("tr",$s,[Ns,e("td",null,s((ie=(ce=t.so)==null?void 0:ce.service_team)!=null?ie:"-"),1)]),e("tr",Ds,[As,e("td",null,s((ue=(de=t.so)==null?void 0:de.group_number)!=null?ue:"-"),1)]),e("tr",Ms,[js,e("td",null,s((_e=(he=t.so)==null?void 0:he.customer_no)!=null?_e:"-"),1)]),e("tr",Ys,[Bs,e("td",null,s((pe=(me=t.so)==null?void 0:me.make)!=null?pe:"-"),1)]),e("tr",Is,[Os,e("td",null,s((ve=(ge=t.so)==null?void 0:ge.model)!=null?ve:"-"),1)]),e("tr",Vs,[Ls,e("td",null,s((fe=(ye=t.so)==null?void 0:ye.serial_number)!=null?fe:"-"),1)]),e("tr",Fs,[Ts,e("td",null,s((xe=(be=t.so)==null?void 0:be.arrg_no)!=null?xe:"-"),1)]),e("tr",qs,[Ps,e("td",null,s((we=(ke=t.so)==null?void 0:ke.std_hours)!=null?we:"0")+" hours",1)]),e("tr",Es,[Us,e("td",null,s((Se=(ze=t.so)==null?void 0:ze.job_description)!=null?Se:"-"),1)]),e("tr",Gs,[Hs,e("td",null,s(($e=(Ce=t.so)==null?void 0:Ce.labor_hours)!=null?$e:"0")+" hours",1)]),e("tr",Js,[Ks,e("td",null,s((De=(Ne=t.so)==null?void 0:Ne.date_sent)!=null?De:"-"),1)]),e("tr",Qs,[Rs,e("td",null,s((Me=(Ae=t.so)==null?void 0:Ae.date_required)!=null?Me:"-"),1)]),e("tr",Ws,[Xs,e("td",null,s((Ye=(je=t.so)==null?void 0:je.date_returned)!=null?Ye:"-"),1)]),e("tr",Zs,[eo,e("td",null,s((Ie=(Be=t.so)==null?void 0:Be.date_received_back)!=null?Ie:"-"),1)]),e("tr",to,[so,e("td",null,s((Ve=(Oe=t.so)==null?void 0:Oe.date_segment_closed)!=null?Ve:"-"),1)]),e("tr",oo,[ao,e("td",null,s((Fe=(Le=t.so)==null?void 0:Le.receive_by)!=null?Fe:"-"),1)]),e("tr",lo,[ro,e("td",null,s((Te=t.so)!=null&&Te.surplus_part_returned?"Yes":"No"),1)]),e("tr",no,[co,e("td",null,s((qe=t.so)!=null&&qe.sims_completed?"Yes":"No"),1)]),e("tr",io,[uo,e("td",null,s((Ee=(Pe=t.so)==null?void 0:Pe.note)!=null?Ee:"-"),1)]),e("tr",ho,[_o,e("td",null,s((Ge=(Ue=t.so)==null?void 0:Ue.deliver_to)!=null?Ge:"-"),1)]),e("tr",mo,[po,e("td",null,s((Je=(He=t.so)==null?void 0:He.return_to)!=null?Je:"-"),1)]),e("tr",go,[vo,e("td",null,s((Ke=t.so)!=null&&Ke.signed_1?"Yes":"No"),1)]),e("tr",yo,[fo,e("td",null,s((Qe=t.so)!=null&&Qe.signed_2?"Yes":"No"),1)]),e("tr",bo,[xo,e("td",null,[e("ul",null,[(r(!0),d(Ze,null,Xe(t.so.servicemen,Re=>(r(),d("li",{key:Re.id},s(Re.name),1))),128))])])])])])]}),footer:o(()=>[n(h,{onClick:A},{default:o(()=>[ko]),_:1})]),_:1},8,["show"]),n(D,{show:w.value,onClose:C},{title:o(()=>[wo]),content:o(()=>[c(" Are you sure you want to delete the selected notes? Once the notes are deleted, all of their resources and data will be permanently deleted. You selected "+s(i.value.length)+" notes. ",1)]),footer:o(()=>[n(h,{onClick:C},{default:o(()=>[zo]),_:1}),n(et,{class:"ml-3",onClick:ct},{default:o(()=>[So]),_:1})]),_:1},8,["show"])]),_:1}))}};export{Io as default};
