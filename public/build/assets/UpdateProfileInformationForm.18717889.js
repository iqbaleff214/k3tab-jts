import{u as B,d as v,o as h,c as P,w as n,e as S,a,b as e,v as g,x as y,I as j,m as b,f as k,g as o,n as x,L as E,i,y as F}from"./app.00e0a79b.js";import{_ as L}from"./Button.c4a079b0.js";import{_ as R}from"./FormSection.4a19dd58.js";import{a as d,_ as c}from"./InputError.13104428.js";import{_ as m}from"./Label.17586606.js";import{_ as z}from"./ActionMessage.d724f088.js";import{_ as $}from"./SecondaryButton.bb8d0b0f.js";import"./SectionTitle.79df38a0.js";import"./_plugin-vue_export-helper.cdc0426e.js";const D=i(" Profile Information "),T=i(" Update your account's profile information and email address. "),M={key:0,class:"col-span-6 sm:col-span-4"},O={class:"mt-2"},Y=["src","alt"],q={class:"mt-2"},G=i(" Select A New Photo "),H=i(" Remove Photo "),J={class:"col-span-6 sm:col-span-4"},K={class:"col-span-6 sm:col-span-4"},Q=a("p",{class:"text-xs mt-1 text-gray-500"},"Used for log in to system. Ask your supervisor if you want to change it.",-1),W={class:"col-span-6 sm:col-span-4"},X={class:"col-span-6 sm:col-span-4"},Z={key:0},ee={class:"text-sm mt-2"},se=i(" Your email address is unverified. "),oe=i(" Click here to re-send the verification email. "),ae={class:"mt-2 font-medium text-sm text-green-600"},le={class:"col-span-6 sm:col-span-4"},te={class:"col-span-6 sm:col-span-4"},re=i(" Saved. "),ne=i(" Save "),ve={__name:"UpdateProfileInformationForm",props:{user:Object},setup(p){const f=p,s=B({_method:"PUT",name:f.user.name,salary_number:f.user.salary_number,email:f.user.email,phone:f.user.phone,address:f.user.address,photo:null}),V=v(null),_=v(null),u=v(null),C=()=>{u.value&&(s.photo=u.value.files[0]),s.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>w()})},U=()=>{V.value=!0},I=()=>{u.value.click()},N=()=>{const t=u.value.files[0];if(!t)return;const l=new FileReader;l.onload=r=>{_.value=r.target.result},l.readAsDataURL(t)},A=()=>{F.Inertia.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{_.value=null,w()}})},w=()=>{var t;(t=u.value)!=null&&t.value&&(u.value.value=null)};return(t,l)=>(h(),P(R,{onSubmitted:C},{title:n(()=>[D]),description:n(()=>[T]),form:n(()=>[t.$page.props.jetstream.managesProfilePhotos?(h(),S("div",M,[a("input",{ref_key:"photoInput",ref:u,type:"file",class:"hidden",onChange:N},null,544),e(m,{for:"photo",value:"Photo"}),g(a("div",O,[a("img",{src:p.user.profile_photo_url,alt:p.user.name,class:"rounded-full h-20 w-20 object-cover"},null,8,Y)],512),[[y,!_.value]]),g(a("div",q,[a("span",{class:"block rounded-full w-20 h-20 bg-cover bg-no-repeat bg-center",style:j("background-image: url('"+_.value+"');")},null,4)],512),[[y,_.value]]),e($,{class:"mt-2 mr-2",type:"button",onClick:b(I,["prevent"])},{default:n(()=>[G]),_:1},8,["onClick"]),p.user.profile_photo_path?(h(),P($,{key:0,type:"button",class:"mt-2",onClick:b(A,["prevent"])},{default:n(()=>[H]),_:1},8,["onClick"])):k("",!0),e(d,{message:o(s).errors.photo,class:"mt-2"},null,8,["message"])])):k("",!0),a("div",J,[e(m,{for:"name",value:"Name"}),e(c,{id:"name",modelValue:o(s).name,"onUpdate:modelValue":l[0]||(l[0]=r=>o(s).name=r),type:"text",class:"mt-1 block w-full",autocomplete:"name"},null,8,["modelValue"]),e(d,{message:o(s).errors.name,class:"mt-2"},null,8,["message"])]),a("div",K,[e(m,{for:"salary_number",value:"Salary Number"}),e(c,{id:"salary_number",modelValue:o(s).salary_number,"onUpdate:modelValue":l[1]||(l[1]=r=>o(s).salary_number=r),type:"text",disabled:["serviceman","foreman"].includes(t.$page.props.user.role),class:x([{"bg-gray-100":["serviceman","foreman"].includes(t.$page.props.user.role)},"mt-1 block w-full"])},null,8,["modelValue","disabled","class"]),Q,e(d,{message:o(s).errors.salary_number,class:"mt-2"},null,8,["message"])]),a("div",W,[e(m,{for:"role",value:"Role"}),e(c,{id:"role",value:t.$page.props.user.role,disabled:"",type:"text",class:"mt-1 block w-full bg-gray-100 capitalize",autocomplete:"role"},null,8,["value"])]),a("div",X,[e(m,{for:"email",value:"Email"}),e(c,{id:"email",modelValue:o(s).email,"onUpdate:modelValue":l[2]||(l[2]=r=>o(s).email=r),type:"email",class:"mt-1 block w-full"},null,8,["modelValue"]),e(d,{message:o(s).errors.email,class:"mt-2"},null,8,["message"]),t.$page.props.jetstream.hasEmailVerification&&p.user.email_verified_at===null?(h(),S("div",Z,[a("p",ee,[se,e(o(E),{href:t.route("verification.send"),method:"post",as:"button",class:"underline text-gray-600 hover:text-gray-900",onClick:b(U,["prevent"])},{default:n(()=>[oe]),_:1},8,["href","onClick"])]),g(a("div",ae," A new verification link has been sent to your email address. ",512),[[y,V.value]])])):k("",!0)]),a("div",le,[e(m,{for:"phone",value:"Phone Number"}),e(c,{id:"phone",modelValue:o(s).phone,"onUpdate:modelValue":l[3]||(l[3]=r=>o(s).phone=r),type:"text",class:"mt-1 block w-full",autocomplete:"phone"},null,8,["modelValue"]),e(d,{message:o(s).errors.phone,class:"mt-2"},null,8,["message"])]),a("div",te,[e(m,{for:"address",value:"Address"}),e(c,{id:"address",modelValue:o(s).address,"onUpdate:modelValue":l[4]||(l[4]=r=>o(s).address=r),type:"text",class:"mt-1 block w-full",autocomplete:"address"},null,8,["modelValue"]),e(d,{message:o(s).errors.address,class:"mt-2"},null,8,["message"])])]),actions:n(()=>[e(z,{on:o(s).recentlySuccessful,class:"mr-3"},{default:n(()=>[re]),_:1},8,["on"]),e(L,{class:x({"opacity-25":o(s).processing}),disabled:o(s).processing},{default:n(()=>[ne]),_:1},8,["class","disabled"])]),_:1}))}};export{ve as default};
