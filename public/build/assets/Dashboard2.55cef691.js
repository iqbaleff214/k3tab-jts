import{d as f,o as s,e as a,a as e,b as u,w as n,g as v,F as g,h as p,L as C,t as o,G as D,f as k,n as w,i as x}from"./app.ea35995a.js";import{a as $}from"./DialogModal.4d24ad8c.js";import{_ as A}from"./SecondaryButton.7cad3c00.js";const N={class:"p-4 w-full bg-white rounded-lg border shadow-xl sm:p-8"},S={class:"flex justify-between items-center mb-4"},L=e("h5",{class:"text-xl font-semibold leading-none text-gray-900 dark:text-white"},"Currently Progressing",-1),V=x(" View all "),j={class:"flow-root"},B={role:"list",class:"divide-y divide-gray-200 dark:divide-gray-700"},F={class:"flex items-center space-x-4"},M={class:"flex-1 min-w-0"},O=["onClick"],T={class:"w-full bg-gray-200 h-4 mt-2 rounded-full dark:bg-gray-700"},z=x(" Work Progress "),E={key:0,class:"relative border-l border-gray-200 dark:border-gray-700"},I=e("div",{class:"absolute w-3 h-3 bg-gray-200 rounded-full mt-1.5 -left-1.5 border border-white dark:border-gray-900 dark:bg-gray-700"},null,-1),P={class:"mb-1 text-sm font-normal leading-none text-gray-400 dark:text-gray-500"},G={class:"text-lg font-semibold text-gray-900 dark:text-white"},W={class:"text-base font-normal text-gray-500 dark:text-gray-400"},q={key:0},H=["src"],J=["href"],K={key:1,class:"relative border-l border-gray-200 dark:border-gray-700"},Q=e("div",{class:"absolute w-3 h-3 bg-gray-200 rounded-full mt-1.5 -left-1.5 border border-white dark:border-gray-900 dark:bg-gray-700"},null,-1),R={class:"mb-1 text-sm font-normal leading-none text-gray-400 dark:text-gray-500"},U={class:"text-lg font-semibold text-gray-900 dark:text-white"},X={class:"text-base font-normal text-gray-500 dark:text-gray-400"},Y={key:0},Z=["src"],tt=["href"],et=x(" Close "),lt={__name:"Dashboard2",setup(st){const b=/(\.jpg|\.jpeg|\.png|\.gif)$/i,_=f({}),h=f(!1),m=d=>{h.value=!0,_.value=d},i=()=>h.value=!1;return(d,at)=>(s(),a(g,null,[e("div",N,[e("div",S,[L,u(v(C),{href:d.route("service-orders.index",{status:"in_progress"}),class:"text-sm font-medium text-yellow-600 hover:underline dark:text-yellow-500"},{default:n(()=>[V]),_:1},8,["href"])]),e("div",j,[e("ul",B,[(s(!0),a(g,null,p(d.$page.props.service_order.in_progress,r=>(s(),a("li",{class:"py-3 sm:py-4",key:r.id},[e("div",F,[e("div",M,[e("p",{class:"text-sm font-medium cursor-pointer text-yellow-600 truncate dark:text-white",onClick:y=>m(r)},o(r.service_order_no),9,O),e("div",T,[e("div",{class:"bg-orange-500 text-xs h-4 font-medium text-orange-100 text-center p-0.5 leading-none rounded-full",style:D({width:`${r.progress_percentage}%`})},o(r.progress_percentage)+"%",5)])])])]))),128))])])]),u($,{show:h.value,onClose:i},{title:n(()=>[z]),content:n(()=>{var r,y;return[e("div",null,[["customer","sales_support"].includes(d.$page.props.user.role)?(s(),a("ol",E,[(s(!0),a(g,null,p((r=_.value)==null?void 0:r.control_card_accepted,t=>{var l,c;return s(),a("li",{class:"mb-10 ml-4",key:t.id},[I,e("time",P,o(new Date(t.created_at).toLocaleString("id-ID")),1),e("h3",G,o(t==null?void 0:t.special_note),1),e("p",W,o((l=t==null?void 0:t.reporter)==null?void 0:l.name),1),(c=t.attachments)!=null&&c.length?(s(),a("div",q,[b.exec(t.attachments[0].path)?(s(),a("img",{key:0,src:t.attachments[0].path,alt:"Attachment",class:"w-full my-2 rounded-lg"},null,8,H)):(s(),a("a",{key:1,href:t.attachments[0].path,class:"text-xs text-orange-500",target:"_blank"},"Open Attachment in New Tab",8,J))])):k("",!0)])}),128))])):(s(),a("ol",K,[(s(!0),a(g,null,p((y=_.value)==null?void 0:y.control_card,t=>{var l,c;return s(),a("li",{class:"mb-10 ml-4",key:t.id},[Q,e("time",R,o(new Date(t.created_at).toLocaleString("id-ID")),1),e("h3",U,o(t==null?void 0:t.special_note),1),e("p",X,o((l=t==null?void 0:t.reporter)==null?void 0:l.name),1),(c=t.attachments)!=null&&c.length?(s(),a("div",Y,[b.exec(t.attachments[0].path)?(s(),a("img",{key:0,src:t.attachments[0].path,alt:"Attachment",class:"w-full my-2 rounded-lg"},null,8,Z)):(s(),a("a",{key:1,href:t.attachments[0].path,class:"text-xs text-orange-500",target:"_blank"},"Open Attachment in New Tab",8,tt))])):k("",!0),e("p",null,[e("span",{class:w(["bg-gray-100 text-gray-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:bg-gray-200 dark:text-gray-900",{"bg-yellow-100 text-yellow-800 dark:bg-yellow-200 dark:text-yellow-900":t==null?void 0:t.is_approved}])},"Approved by Foreman",2),e("span",{class:w(["bg-gray-100 text-gray-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:bg-gray-200 dark:text-gray-900",{"bg-yellow-100 text-yellow-800 dark:bg-yellow-200 dark:text-yellow-900":t==null?void 0:t.is_accepted}])},"Approved by Supervisor",2)])])}),128))]))])]}),footer:n(()=>[u(A,{onClick:i},{default:n(()=>[et]),_:1})]),_:1},8,["show"])],64))}};export{lt as default};
