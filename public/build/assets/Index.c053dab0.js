import{d as b,j as dt,D as ut,k as ht,o as i,c as x,w as o,b as l,a as e,g as We,L as _t,f as u,e as d,h as Xe,v as mt,B as pt,t as s,F as Ze,i as r,y as D}from"./app.f171c1d5.js";import{_ as gt}from"./AppLayout.01bb2812.js";import{_ as vt}from"./Breadcrumb.ae66e3a8.js";import{_ as yt}from"./Button.bf50e133.js";import{_ as h}from"./SecondaryButton.36940c3a.js";import{_ as et}from"./DangerButton.e3e9c5f8.js";import{_ as ft,a as bt,b as xt}from"./Pagination.6e765b1c.js";import{a as N}from"./DialogModal.e3161df7.js";import"./_plugin-vue_export-helper.cdc0426e.js";const kt=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Control Card ",-1),zt={class:"py-12"},wt={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},St={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},Ct={class:"flex items-center justify-between"},$t={class:"flex flex-row space-x-2"},Dt=r("Detail"),Nt=r("Create"),At=r("Delete"),Mt=r("Approve"),jt={key:0,class:"w-4 p-4"},Yt={class:"flex items-center"},Bt=["id","value"],It=["for"],Ot={scope:"row",class:"px-6 py-4 font-medium text-gray-900 dark:text-white whitespace-nowrap"},Vt={class:"px-6 py-4"},Lt={class:"px-6 py-4"},Ft={key:1,class:"px-6 py-4"},qt={key:2,class:"px-6 py-4"},Pt=r(" Approve Note "),Tt=r(" Cancel "),Et=r(" Approve "),Ut=r(" Detail Service Order "),Gt={class:"w-full overflow-x-scroll text-sm text-left mt-4 text-gray-500 dark:text-gray-400"},Ht={class:"hover:bg-gray-50"},Jt=e("th",{class:"capitalize px-6 py-4 font-medium"},"service order no",-1),Kt={class:"hover:bg-gray-50"},Qt=e("th",{class:"capitalize px-6 py-4 font-medium"},"status",-1),Rt={class:"hover:bg-gray-50"},Wt=e("th",{class:"capitalize px-6 py-4 font-medium"},"supervisor",-1),Xt={class:"hover:bg-gray-50"},Zt=e("th",{class:"capitalize px-6 py-4 font-medium"},"foreman PIC",-1),es={class:"hover:bg-gray-50"},ts=e("th",{class:"capitalize px-6 py-4 font-medium"},"serviceman",-1),ss={class:"hover:bg-gray-50"},os=e("th",{class:"capitalize px-6 py-4 font-medium"},"segment",-1),as={class:"hover:bg-gray-50"},ls=e("th",{class:"capitalize px-6 py-4 font-medium"},"operation",-1),rs={class:"hover:bg-gray-50"},ns=e("th",{class:"capitalize px-6 py-4 font-medium"},"job code",-1),cs={class:"hover:bg-gray-50"},is=e("th",{class:"capitalize px-6 py-4 font-medium"},"component code",-1),ds={class:"hover:bg-gray-50"},us=e("th",{class:"capitalize px-6 py-4 font-medium"},"smu",-1),hs={class:"hover:bg-gray-50"},_s=e("th",{class:"capitalize px-6 py-4 font-medium"},"warranty?",-1),ms={key:0,class:"hover:bg-gray-50"},ps=e("th",{class:"capitalize px-6 py-4 font-medium"},"warranty",-1),gs={class:"hover:bg-gray-50"},vs=e("th",{class:"capitalize px-6 py-4 font-medium"},"pip/psp",-1),ys={class:"hover:bg-gray-50"},fs=e("th",{class:"capitalize px-6 py-4 font-medium"},"job control",-1),bs={class:"hover:bg-gray-50"},xs=e("th",{class:"capitalize px-6 py-4 font-medium"},"business area",-1),ks={class:"hover:bg-gray-50"},zs=e("th",{class:"capitalize px-6 py-4 font-medium"},"customer name",-1),ws={class:"hover:bg-gray-50"},Ss=e("th",{class:"capitalize px-6 py-4 font-medium"},"service team",-1),Cs={class:"hover:bg-gray-50"},$s=e("th",{class:"capitalize px-6 py-4 font-medium"},"group number",-1),Ds={class:"hover:bg-gray-50"},Ns=e("th",{class:"capitalize px-6 py-4 font-medium"},"customer no",-1),As={class:"hover:bg-gray-50"},Ms=e("th",{class:"capitalize px-6 py-4 font-medium"},"make",-1),js={class:"hover:bg-gray-50"},Ys=e("th",{class:"capitalize px-6 py-4 font-medium"},"model",-1),Bs={class:"hover:bg-gray-50"},Is=e("th",{class:"capitalize px-6 py-4 font-medium"},"serial number",-1),Os={class:"hover:bg-gray-50"},Vs=e("th",{class:"capitalize px-6 py-4 font-medium"},"arrg no",-1),Ls={class:"hover:bg-gray-50"},Fs=e("th",{class:"capitalize px-6 py-4 font-medium"},"std hours",-1),qs={class:"hover:bg-gray-50"},Ps=e("th",{class:"capitalize px-6 py-4 font-medium"},"job description",-1),Ts={class:"hover:bg-gray-50"},Es=e("th",{class:"capitalize px-6 py-4 font-medium"},"labor hours",-1),Us={class:"hover:bg-gray-50"},Gs=e("th",{class:"capitalize px-6 py-4 font-medium"},"date sent",-1),Hs={class:"hover:bg-gray-50"},Js=e("th",{class:"capitalize px-6 py-4 font-medium"},"date required",-1),Ks={class:"hover:bg-gray-50"},Qs=e("th",{class:"capitalize px-6 py-4 font-medium"},"date returned",-1),Rs={class:"hover:bg-gray-50"},Ws=e("th",{class:"capitalize px-6 py-4 font-medium"},"date received_back",-1),Xs={class:"hover:bg-gray-50"},Zs=e("th",{class:"capitalize px-6 py-4 font-medium"},"date segment closed",-1),eo={class:"hover:bg-gray-50"},to=e("th",{class:"capitalize px-6 py-4 font-medium"},"receive by",-1),so={class:"hover:bg-gray-50"},oo=e("th",{class:"capitalize px-6 py-4 font-medium"},"surplus part returned",-1),ao={class:"hover:bg-gray-50"},lo=e("th",{class:"capitalize px-6 py-4 font-medium"},"sims completed",-1),ro={class:"hover:bg-gray-50"},no=e("th",{class:"capitalize px-6 py-4 font-medium"},"note",-1),co={class:"hover:bg-gray-50"},io=e("th",{class:"capitalize px-6 py-4 font-medium"},"deliver to",-1),uo={class:"hover:bg-gray-50"},ho=e("th",{class:"capitalize px-6 py-4 font-medium"},"return to",-1),_o={class:"hover:bg-gray-50"},mo=e("th",{class:"capitalize px-6 py-4 font-medium"},"signed 1?",-1),po={class:"hover:bg-gray-50"},go=e("th",{class:"capitalize px-6 py-4 font-medium"},"signed 2?",-1),vo={class:"hover:bg-gray-50"},yo=e("th",{class:"capitalize px-6 py-4 font-medium"},"servicemen",-1),fo=r(" Close "),bo=r(" Delete Note "),xo=r(" Cancel "),ko=r(" Delete Notes "),jo={__name:"Index",props:{so:Object,data:Object,search:String},setup(t){var M;const _=t,n=b([]),tt=dt(()=>n.value.length==_.data.data.length),k=()=>n.value.length=0,st=a=>{a?n.value=_.data.data.map(y=>y.id):k()},z=b(!1),w=b(!1),S=b(!1),ot=()=>S.value=!0,A=()=>S.value=!1,at=()=>z.value=!0,C=()=>z.value=!1,lt=()=>w.value=!0,$=()=>w.value=!1,v=["Date","Note","Serviceman"],rt=[{label:"Service Order",url:route("service-orders.index")},{label:(M=_.so)==null?void 0:M.service_order_no,url:null},{label:"Control Card",url:null}],nt=a=>{D.Inertia.get(route("control-cards.index",_.so.id),{search:a},{preserveState:!0,preserveScroll:!0})},ct=()=>{D.Inertia.delete(route("control-cards.destroy",{service_order:_.so.id,control_card:n.value,data:n.value}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{C(),k()}})},it=()=>{D.Inertia.put(route("control-cards.approve"),{data:n.value},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{$(),k()}})};return ut(()=>{const a=ht().props.value.user;["serviceman","foreman"].includes(a.role)?(v.push("Foreman Approved?"),v.push("Supervisor Approved?")):["supervisor"].includes(a.role)&&v.push("Approved?")}),(a,y)=>(i(),x(gt,{title:"Control Card"},{header:o(()=>[kt,l(vt,{links:rt})]),default:o(()=>[e("div",zt,[e("div",wt,[e("div",St,[l(xt,{columns:v,checkbox:["foreman","supervisor","serviceman"].includes(a.$page.props.user.role),action:[].includes(a.$page.props.user.role),onSelectAllToggle:st,checkboxState:We(tt)},{header:o(()=>[e("div",Ct,[l(ft,{placeholder:"Note",search:t.search,onSearch:nt},null,8,["search"]),e("div",$t,[l(h,{onClick:ot},{default:o(()=>[Dt]),_:1}),["serviceman"].includes(a.$page.props.user.role)&&a.$page.props.so.serviceman_id==a.$page.props.user.id&&a.$page.props.so.status!="done"?(i(),x(We(_t),{key:0,href:a.route("control-cards.create",t.so.id)},{default:o(()=>[l(yt,null,{default:o(()=>[Nt]),_:1})]),_:1},8,["href"])):u("",!0),["foreman","supervisor","serviceman"].includes(a.$page.props.user.role)?(i(),x(h,{key:1,disabled:n.value.length==0,onClick:at},{default:o(()=>[At]),_:1},8,["disabled"])):u("",!0),["foreman","supervisor"].includes(a.$page.props.user.role)?(i(),x(h,{key:2,disabled:n.value.length==0,onClick:lt},{default:o(()=>[Mt]),_:1},8,["disabled"])):u("",!0)])])]),tbody:o(()=>[(i(!0),d(Ze,null,Xe(t.data.data,c=>{var m,p,g;return i(),d("tr",{key:c,class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[["foreman","supervisor","serviceman"].includes(a.$page.props.user.role)?(i(),d("td",jt,[e("div",Yt,[mt(e("input",{id:`checkbox-table-${c.id}`,value:c.id,"onUpdate:modelValue":y[0]||(y[0]=f=>n.value=f),type:"checkbox",class:"w-4 h-4 text-yellow-600 bg-gray-100 border-gray-300 rounded focus:ring-yellow-500 dark:focus:ring-yellow-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,Bt),[[pt,n.value]]),e("label",{for:`checkbox-table-${c.id}`,class:"sr-only"},"checkbox",8,It)])])):u("",!0),e("th",Ot,s(new Date(c.created_at).toLocaleString("id-ID")),1),e("td",Vt,s((m=c.special_note)!=null?m:"-"),1),e("td",Lt,s((g=(p=c.reporter)==null?void 0:p.name)!=null?g:"-"),1),["serviceman","foreman"].includes(a.$page.props.user.role)?(i(),d("td",Ft,s(c.is_approved?"Yes":"No"),1)):u("",!0),["serviceman","foreman","supervisor"].includes(a.$page.props.user.role)?(i(),d("td",qt,s(c.is_accepted?"Yes":"No"),1)):u("",!0)])}),128))]),footer:o(()=>[l(bt,{links:t.data.links,next:t.data.next_page_url,prev:t.data.prev_page_url},null,8,["links","next","prev"])]),_:1},8,["checkbox","action","checkboxState"])])])]),l(N,{show:w.value,onClose:$},{title:o(()=>[Pt]),content:o(()=>[r(" Are you sure you want to approve the selected notes? You selected "+s(n.value.length)+" notes. ",1)]),footer:o(()=>[l(h,{onClick:$},{default:o(()=>[Tt]),_:1}),l(et,{class:"ml-3",onClick:it},{default:o(()=>[Et]),_:1})]),_:1},8,["show"]),l(N,{show:S.value,onClose:A},{title:o(()=>[Ut]),content:o(()=>{var c,m,p,g,f,j,Y,B,I,O,V,L,F,q,P,T,E,U,G,H,J,K,Q,R,W,X,Z,ee,te,se,oe,ae,le,re,ne,ce,ie,de,ue,he,_e,me,pe,ge,ve,ye,fe,be,xe,ke,ze,we,Se,Ce,$e,De,Ne,Ae,Me,je,Ye,Be,Ie,Oe,Ve,Le,Fe,qe,Pe,Te,Ee,Ue,Ge,He,Je,Ke,Qe;return[e("table",Gt,[e("tbody",null,[e("tr",Ht,[Jt,e("td",null,s((m=(c=t.so)==null?void 0:c.service_order_no)!=null?m:"-"),1)]),e("tr",Kt,[Qt,e("td",null,s((g=(p=t.so)==null?void 0:p.service_order_status)!=null?g:"-"),1)]),e("tr",Rt,[Wt,e("td",null,s((Y=(j=(f=t.so)==null?void 0:f.supervisor)==null?void 0:j.name)!=null?Y:"-"),1)]),e("tr",Xt,[Zt,e("td",null,s((O=(I=(B=t.so)==null?void 0:B.foreman)==null?void 0:I.name)!=null?O:"-"),1)]),e("tr",es,[ts,e("td",null,s((F=(L=(V=t.so)==null?void 0:V.serviceman)==null?void 0:L.name)!=null?F:"-"),1)]),e("tr",ss,[os,e("td",null,s((P=(q=t.so)==null?void 0:q.segment)!=null?P:"-"),1)]),e("tr",as,[ls,e("td",null,s((E=(T=t.so)==null?void 0:T.operation)!=null?E:"-"),1)]),e("tr",rs,[ns,e("td",null,s((G=(U=t.so)==null?void 0:U.job_code)!=null?G:"-"),1)]),e("tr",cs,[is,e("td",null,s((J=(H=t.so)==null?void 0:H.component_code)!=null?J:"-"),1)]),e("tr",ds,[us,e("td",null,s((Q=(K=t.so)==null?void 0:K.smu)!=null?Q:"-"),1)]),e("tr",hs,[_s,e("td",null,s((R=t.so)!=null&&R.warranty?"Yes":"No"),1)]),(W=t.so)!=null&&W.warranty?(i(),d("tr",ms,[ps,e("td",null,s((Z=(X=t.so)==null?void 0:X.warranty_text)!=null?Z:"-"),1)])):u("",!0),e("tr",gs,[vs,e("td",null,s((te=(ee=t.so)==null?void 0:ee.pip_psp)!=null?te:"-"),1)]),e("tr",ys,[fs,e("td",null,s((oe=(se=t.so)==null?void 0:se.job_control)!=null?oe:"-"),1)]),e("tr",bs,[xs,e("td",null,s((le=(ae=t.so)==null?void 0:ae.business_area)!=null?le:"-"),1)]),e("tr",ks,[zs,e("td",null,s((ne=(re=t.so)==null?void 0:re.customer_name)!=null?ne:"-"),1)]),e("tr",ws,[Ss,e("td",null,s((ie=(ce=t.so)==null?void 0:ce.service_team)!=null?ie:"-"),1)]),e("tr",Cs,[$s,e("td",null,s((ue=(de=t.so)==null?void 0:de.group_number)!=null?ue:"-"),1)]),e("tr",Ds,[Ns,e("td",null,s((_e=(he=t.so)==null?void 0:he.customer_no)!=null?_e:"-"),1)]),e("tr",As,[Ms,e("td",null,s((pe=(me=t.so)==null?void 0:me.make)!=null?pe:"-"),1)]),e("tr",js,[Ys,e("td",null,s((ve=(ge=t.so)==null?void 0:ge.model)!=null?ve:"-"),1)]),e("tr",Bs,[Is,e("td",null,s((fe=(ye=t.so)==null?void 0:ye.serial_number)!=null?fe:"-"),1)]),e("tr",Os,[Vs,e("td",null,s((xe=(be=t.so)==null?void 0:be.arrg_no)!=null?xe:"-"),1)]),e("tr",Ls,[Fs,e("td",null,s((ze=(ke=t.so)==null?void 0:ke.std_hours)!=null?ze:"0")+" hours",1)]),e("tr",qs,[Ps,e("td",null,s((Se=(we=t.so)==null?void 0:we.job_description)!=null?Se:"-"),1)]),e("tr",Ts,[Es,e("td",null,s(($e=(Ce=t.so)==null?void 0:Ce.labor_hours)!=null?$e:"0")+" hours",1)]),e("tr",Us,[Gs,e("td",null,s((Ne=(De=t.so)==null?void 0:De.date_sent)!=null?Ne:"-"),1)]),e("tr",Hs,[Js,e("td",null,s((Me=(Ae=t.so)==null?void 0:Ae.date_required)!=null?Me:"-"),1)]),e("tr",Ks,[Qs,e("td",null,s((Ye=(je=t.so)==null?void 0:je.date_returned)!=null?Ye:"-"),1)]),e("tr",Rs,[Ws,e("td",null,s((Ie=(Be=t.so)==null?void 0:Be.date_received_back)!=null?Ie:"-"),1)]),e("tr",Xs,[Zs,e("td",null,s((Ve=(Oe=t.so)==null?void 0:Oe.date_segment_closed)!=null?Ve:"-"),1)]),e("tr",eo,[to,e("td",null,s((Fe=(Le=t.so)==null?void 0:Le.receive_by)!=null?Fe:"-"),1)]),e("tr",so,[oo,e("td",null,s((qe=t.so)!=null&&qe.surplus_part_returned?"Yes":"No"),1)]),e("tr",ao,[lo,e("td",null,s((Pe=t.so)!=null&&Pe.sims_completed?"Yes":"No"),1)]),e("tr",ro,[no,e("td",null,s((Ee=(Te=t.so)==null?void 0:Te.note)!=null?Ee:"-"),1)]),e("tr",co,[io,e("td",null,s((Ge=(Ue=t.so)==null?void 0:Ue.deliver_to)!=null?Ge:"-"),1)]),e("tr",uo,[ho,e("td",null,s((Je=(He=t.so)==null?void 0:He.return_to)!=null?Je:"-"),1)]),e("tr",_o,[mo,e("td",null,s((Ke=t.so)!=null&&Ke.signed_1?"Yes":"No"),1)]),e("tr",po,[go,e("td",null,s((Qe=t.so)!=null&&Qe.signed_2?"Yes":"No"),1)]),e("tr",vo,[yo,e("td",null,[e("ul",null,[(i(!0),d(Ze,null,Xe(t.so.servicemen,Re=>(i(),d("li",{key:Re.id},s(Re.name),1))),128))])])])])])]}),footer:o(()=>[l(h,{onClick:A},{default:o(()=>[fo]),_:1})]),_:1},8,["show"]),l(N,{show:z.value,onClose:C},{title:o(()=>[bo]),content:o(()=>[r(" Are you sure you want to delete the selected notes? Once the notes are deleted, all of their resources and data will be permanently deleted. You selected "+s(n.value.length)+" notes. ",1)]),footer:o(()=>[l(h,{onClick:C},{default:o(()=>[xo]),_:1}),l(et,{class:"ml-3",onClick:ct},{default:o(()=>[ko]),_:1})]),_:1},8,["show"])]),_:1}))}};export{jo as default};
