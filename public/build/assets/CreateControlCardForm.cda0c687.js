import{d,u as S,o as b,c as C,w as l,a as r,b as o,g as a,m as V,t as $,v as k,x as D,n as N,i as n}from"./app.30588dab.js";import{_ as A}from"./ActionMessage.234729e2.js";import{_ as F}from"./Button.025a5217.js";import{_ as I}from"./FormSection.9bafc5ee.js";import{_ as v}from"./Input.51075cc4.js";import{_ as m}from"./InputError.8801193c.js";import{_ as g}from"./Label.d504be2c.js";import{_ as U}from"./SecondaryButton.88843e7a.js";import"./SectionTitle.983749b8.js";import"./_plugin-vue_export-helper.cdc0426e.js";const j=n(" Create new control card's note "),B=n(" Add your new progress on service order. "),O={class:"col-span-6 sm:col-span-6"},R={class:"col-span-6 sm:col-span-6"},z={class:"col-span-6 sm:col-span-6"},E=n(" Upload Attachment "),L={class:"text-xs mt-1 text-gray-500"},M={class:"mt-2"},P=["src"],T=n(" Saved. "),q=n(" Save "),se={__name:"CreateControlCardForm",props:{so:Object},setup(w){const i=w,_=d(null),p=d(null),c=d(null),y=u=>{const t=/(\.jpg|\.jpeg|\.png|\.gif)$/i,s=u.target.files[0];if(e.file=s,!!s){if(t.exec(s.name)){const f=new FileReader;f.onload=x=>{c.value=x.target.result},f.readAsDataURL(s)}_.value=s.name}},e=S({date:new Date().toISOString().slice(0,10),special_note:null,is_approved:!1,is_accepted:!1,service_order_id:i.so.id,serviceman_id:i.so.serviceman_id,file:null}),h=()=>{e.post(route("control-cards.store",i.so.id),{preserveScroll:!0,onSuccess:()=>e.reset()})};return(u,t)=>(b(),C(I,{onSubmitted:h},{title:l(()=>[j]),description:l(()=>[B]),form:l(()=>[r("div",O,[o(g,{for:"date",value:"Date*"}),o(v,{id:"date",modelValue:a(e).date,"onUpdate:modelValue":t[0]||(t[0]=s=>a(e).date=s),type:"date",class:"mt-1 block w-full bg-gray-100",readonly:""},null,8,["modelValue"]),o(m,{message:a(e).errors.date,class:"mt-2"},null,8,["message"])]),r("div",R,[o(g,{for:"special_note",value:"Note*"}),o(v,{id:"special_note",modelValue:a(e).special_note,"onUpdate:modelValue":t[1]||(t[1]=s=>a(e).special_note=s),type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),o(m,{message:a(e).errors.special_note,class:"mt-2"},null,8,["message"])]),r("div",z,[o(U,{class:"mt-2 mr-2",type:"button",onClick:t[2]||(t[2]=V(()=>p.value.click(),["prevent"]))},{default:l(()=>[E]),_:1}),r("p",L,$(_.value),1),o(m,{message:a(e).errors.file,class:"mt-2"},null,8,["message"]),k(r("div",M,[r("img",{src:c.value,alt:"Attachment",class:"w-full rounded-lg"},null,8,P)],512),[[D,c.value]])]),r("input",{type:"file",onInput:t[3]||(t[3]=s=>y(s)),class:"hidden",ref_key:"fileInput",ref:p},null,544)]),actions:l(()=>[o(A,{on:a(e).recentlySuccessful,class:"mr-3"},{default:l(()=>[T]),_:1},8,["on"]),o(F,{class:N({"opacity-25":a(e).processing}),disabled:a(e).processing},{default:l(()=>[q]),_:1},8,["class","disabled"])]),_:1}))}};export{se as default};
