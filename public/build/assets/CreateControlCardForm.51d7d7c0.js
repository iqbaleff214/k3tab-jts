import{d as u,u as C,o as S,c as V,w as r,a,b as l,g as o,v,E as k,m as $,t as D,x as N,n as U,i as n}from"./app.3132a195.js";import{_ as A}from"./ActionMessage.73e00fa8.js";import{_ as F}from"./Button.914d69d4.js";import{_ as I}from"./FormSection.cb601c36.js";import{_ as w}from"./Input.4f7714c1.js";import{_ as i}from"./InputError.c8bfdd85.js";import{_ as p}from"./Label.34afe86d.js";import{_ as j}from"./SecondaryButton.672a0479.js";import"./SectionTitle.ff08868c.js";import"./_plugin-vue_export-helper.cdc0426e.js";const B=n(" Create new control card's note "),E=n(" Add your new progress on service order. "),M={class:"col-span-6 sm:col-span-6"},O={class:"col-span-6 sm:col-span-6"},R={class:"col-span-6 sm:col-span-6"},T=["placeholder"],z={class:"col-span-6 sm:col-span-6"},L=n(" Upload Attachment "),P={class:"text-xs mt-1 text-gray-500"},q={class:"mt-2"},G=["src"],H=n(" Saved. "),J=n(" Save "),le={__name:"CreateControlCardForm",props:{so:Object},setup(y){const c=y,_=u(null),f=u(null),d=u(null),h=m=>{const t=/(\.jpg|\.jpeg|\.png|\.gif)$/i,s=m.target.files[0];if(e.file=s,!!s){if(t.exec(s.name)){const g=new FileReader;g.onload=b=>{d.value=b.target.result},g.readAsDataURL(s)}_.value=s.name}},e=C({date:new Date().toISOString().slice(0,10),special_note:null,comment:null,is_approved:!1,is_accepted:!1,service_order_id:c.so.id,serviceman_id:c.so.serviceman_id,file:null}),x=()=>{e.post(route("control-cards.store",c.so.id),{preserveScroll:!0,onSuccess:()=>e.reset()})};return(m,t)=>(S(),V(I,{onSubmitted:x},{title:r(()=>[B]),description:r(()=>[E]),form:r(()=>[a("div",M,[l(p,{for:"date",value:"Date*"}),l(w,{id:"date",modelValue:o(e).date,"onUpdate:modelValue":t[0]||(t[0]=s=>o(e).date=s),type:"date",class:"mt-1 block w-full bg-gray-100",readonly:""},null,8,["modelValue"]),l(i,{message:o(e).errors.date,class:"mt-2"},null,8,["message"])]),a("div",O,[l(p,{for:"special_note",value:"Note*"}),l(w,{id:"special_note",modelValue:o(e).special_note,"onUpdate:modelValue":t[1]||(t[1]=s=>o(e).special_note=s),type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),l(i,{message:o(e).errors.special_note,class:"mt-2"},null,8,["message"])]),a("div",R,[l(p,{for:"comment",value:"Comment"}),v(a("textarea",{rows:"4","onUpdate:modelValue":t[2]||(t[2]=s=>o(e).comment=s),class:"block p-2.5 w-full text-gray-900 rounded-md border-gray-300 focus:border-yellow-300 focus:ring focus:ring-yellow-200 focus:ring-opacity-50",placeholder:m.placeholder},null,8,T),[[k,o(e).comment]]),l(i,{message:o(e).errors.comment,class:"mt-2"},null,8,["message"])]),a("div",z,[l(j,{class:"mt-2 mr-2",type:"button",onClick:t[3]||(t[3]=$(()=>f.value.click(),["prevent"]))},{default:r(()=>[L]),_:1}),a("p",P,D(_.value),1),l(i,{message:o(e).errors.file,class:"mt-2"},null,8,["message"]),v(a("div",q,[a("img",{src:d.value,alt:"Attachment",class:"w-full rounded-lg"},null,8,G)],512),[[N,d.value]])]),a("input",{type:"file",onInput:t[4]||(t[4]=s=>h(s)),class:"hidden",ref_key:"fileInput",ref:f},null,544)]),actions:r(()=>[l(A,{on:o(e).recentlySuccessful,class:"mr-3"},{default:r(()=>[H]),_:1},8,["on"]),l(F,{class:U({"opacity-25":o(e).processing}),disabled:o(e).processing},{default:r(()=>[J]),_:1},8,["class","disabled"])]),_:1}))}};export{le as default};
