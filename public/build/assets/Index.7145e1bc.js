import{d as p,j as bt,o as l,c as ot,w as r,b as n,a as e,v as at,K as ft,s as xt,e as c,h as z,t,F as S,g as $,L as V,f as C,B as kt,n as rt,i,y as D}from"./app.f171c1d5.js";import{_ as wt}from"./AppLayout.01bb2812.js";import{_ as zt}from"./Breadcrumb.ae66e3a8.js";import{_ as lt}from"./Button.bf50e133.js";import{_ as A}from"./SecondaryButton.36940c3a.js";import{_ as ct}from"./DangerButton.e3e9c5f8.js";import{_ as St,a as Ct,b as $t}from"./Pagination.6e765b1c.js";import{a as B}from"./DialogModal.e3161df7.js";import{_ as Dt}from"./Checkbox.5cd9ad82.js";import"./_plugin-vue_export-helper.cdc0426e.js";const At=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Service Order ",-1),Mt={class:"py-12"},Nt={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},jt={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},Ot={class:"flex items-center justify-between"},It={class:"flex flex-row space-x2"},Yt=e("option",{value:null},"All Status",-1),Vt=["value"],Bt={key:0,class:"flex flex-row space-x-2"},Lt=i("Create"),Pt=i("Mark As Done"),Tt={key:0,class:"w-4 p-4"},Ft={class:"flex items-center"},Ut=["id","value"],qt=["for"],Et={scope:"row",class:"px-6 py-4 font-medium text-orange-500 cursor-pointer dark:text-white whitespace-nowrap"},Kt=["textContent","onClick"],Rt={class:"px-6 py-4"},Wt={class:"px-6 py-4"},Gt={class:"px-6 py-4"},Ht={key:1,class:"px-6 py-4"},Jt={key:2,class:"px-6 py-4"},Qt={key:3,class:"px-6 py-4"},Xt={key:4,class:"px-6 py-4 text-right"},Zt=i(" Edit "),es={class:"flex items-center justify-between"},ts=e("div",null," Detail Service Order ",-1),ss={class:"flex items-center"},os=e("span",{class:"ml-2 text-sm text-gray-600"},"Work Progress Only",-1),as={key:0},rs={key:0,class:"relative border-l border-gray-200 dark:border-gray-700"},ls=e("div",{class:"absolute w-3 h-3 bg-gray-200 rounded-full mt-1.5 -left-1.5 border border-white dark:border-gray-900 dark:bg-gray-700"},null,-1),cs={class:"mb-1 text-sm font-normal leading-none text-gray-400 dark:text-gray-500"},ds={class:"text-lg font-semibold text-gray-900 dark:text-white"},ns={class:"text-base font-normal text-gray-500 dark:text-gray-400"},is={key:1,class:"relative border-l border-gray-200 dark:border-gray-700"},us=e("div",{class:"absolute w-3 h-3 bg-gray-200 rounded-full mt-1.5 -left-1.5 border border-white dark:border-gray-900 dark:bg-gray-700"},null,-1),_s={class:"mb-1 text-sm font-normal leading-none text-gray-400 dark:text-gray-500"},hs={class:"text-lg font-semibold text-gray-900 dark:text-white"},ps={class:"text-base font-normal text-gray-500 dark:text-gray-400"},gs={key:1,class:"w-full overflow-x-scroll text-sm text-left mt-4 text-gray-500 dark:text-gray-400"},ms={class:"hover:bg-gray-50"},vs=e("th",{class:"capitalize px-6 py-4 font-medium"},"service order no",-1),ys={class:"hover:bg-gray-50"},bs=e("th",{class:"capitalize px-6 py-4 font-medium"},"status",-1),fs={class:"hover:bg-gray-50"},xs=e("th",{class:"capitalize px-6 py-4 font-medium"},"supervisor",-1),ks={class:"hover:bg-gray-50"},ws=e("th",{class:"capitalize px-6 py-4 font-medium"},"foreman PIC",-1),zs={class:"hover:bg-gray-50"},Ss=e("th",{class:"capitalize px-6 py-4 font-medium"},"serviceman",-1),Cs={class:"hover:bg-gray-50"},$s=e("th",{class:"capitalize px-6 py-4 font-medium"},"segment",-1),Ds={class:"hover:bg-gray-50"},As=e("th",{class:"capitalize px-6 py-4 font-medium"},"operation",-1),Ms={class:"hover:bg-gray-50"},Ns=e("th",{class:"capitalize px-6 py-4 font-medium"},"job code",-1),js={class:"hover:bg-gray-50"},Os=e("th",{class:"capitalize px-6 py-4 font-medium"},"component code",-1),Is={class:"hover:bg-gray-50"},Ys=e("th",{class:"capitalize px-6 py-4 font-medium"},"smu",-1),Vs={class:"hover:bg-gray-50"},Bs=e("th",{class:"capitalize px-6 py-4 font-medium"},"warranty?",-1),Ls={key:0,class:"hover:bg-gray-50"},Ps=e("th",{class:"capitalize px-6 py-4 font-medium"},"warranty",-1),Ts={class:"hover:bg-gray-50"},Fs=e("th",{class:"capitalize px-6 py-4 font-medium"},"pip/psp",-1),Us={class:"hover:bg-gray-50"},qs=e("th",{class:"capitalize px-6 py-4 font-medium"},"job control",-1),Es={class:"hover:bg-gray-50"},Ks=e("th",{class:"capitalize px-6 py-4 font-medium"},"business area",-1),Rs={class:"hover:bg-gray-50"},Ws=e("th",{class:"capitalize px-6 py-4 font-medium"},"customer name",-1),Gs={class:"hover:bg-gray-50"},Hs=e("th",{class:"capitalize px-6 py-4 font-medium"},"service team",-1),Js={class:"hover:bg-gray-50"},Qs=e("th",{class:"capitalize px-6 py-4 font-medium"},"group number",-1),Xs={class:"hover:bg-gray-50"},Zs=e("th",{class:"capitalize px-6 py-4 font-medium"},"customer no",-1),eo={class:"hover:bg-gray-50"},to=e("th",{class:"capitalize px-6 py-4 font-medium"},"make",-1),so={class:"hover:bg-gray-50"},oo=e("th",{class:"capitalize px-6 py-4 font-medium"},"model",-1),ao={class:"hover:bg-gray-50"},ro=e("th",{class:"capitalize px-6 py-4 font-medium"},"serial number",-1),lo={class:"hover:bg-gray-50"},co=e("th",{class:"capitalize px-6 py-4 font-medium"},"arrg no",-1),no={class:"hover:bg-gray-50"},io=e("th",{class:"capitalize px-6 py-4 font-medium"},"std hours",-1),uo={class:"hover:bg-gray-50"},_o=e("th",{class:"capitalize px-6 py-4 font-medium"},"job description",-1),ho={class:"hover:bg-gray-50"},po=e("th",{class:"capitalize px-6 py-4 font-medium"},"labor hours",-1),go={class:"hover:bg-gray-50"},mo=e("th",{class:"capitalize px-6 py-4 font-medium"},"date sent",-1),vo={class:"hover:bg-gray-50"},yo=e("th",{class:"capitalize px-6 py-4 font-medium"},"date required",-1),bo={class:"hover:bg-gray-50"},fo=e("th",{class:"capitalize px-6 py-4 font-medium"},"date returned",-1),xo={class:"hover:bg-gray-50"},ko=e("th",{class:"capitalize px-6 py-4 font-medium"},"date received_back",-1),wo={class:"hover:bg-gray-50"},zo=e("th",{class:"capitalize px-6 py-4 font-medium"},"date segment closed",-1),So={class:"hover:bg-gray-50"},Co=e("th",{class:"capitalize px-6 py-4 font-medium"},"receive by",-1),$o={class:"hover:bg-gray-50"},Do=e("th",{class:"capitalize px-6 py-4 font-medium"},"surplus part returned",-1),Ao={class:"hover:bg-gray-50"},Mo=e("th",{class:"capitalize px-6 py-4 font-medium"},"sims completed",-1),No={class:"hover:bg-gray-50"},jo=e("th",{class:"capitalize px-6 py-4 font-medium"},"note",-1),Oo={class:"hover:bg-gray-50"},Io=e("th",{class:"capitalize px-6 py-4 font-medium"},"deliver to",-1),Yo={class:"hover:bg-gray-50"},Vo=e("th",{class:"capitalize px-6 py-4 font-medium"},"return to",-1),Bo={class:"hover:bg-gray-50"},Lo=e("th",{class:"capitalize px-6 py-4 font-medium"},"signed 1?",-1),Po={class:"hover:bg-gray-50"},To=e("th",{class:"capitalize px-6 py-4 font-medium"},"signed 2?",-1),Fo={class:"hover:bg-gray-50"},Uo=e("th",{class:"capitalize px-6 py-4 font-medium"},"servicemen",-1),qo=i(" Close "),Eo=i(" Control Card "),Ko=i(" Mark as Done "),Ro=i(" Cancel "),Wo=i(" Mark As Done "),Go=i(" Delete Account "),Ho=i(" Cancel "),Jo=i(" Delete Accounts "),ca={__name:"Index",props:{data:Object,search:String,status:String},setup(h){const g=h,u=p([]),dt=bt(()=>u.value.length==g.data.data.length),M=p(!0),s=p({}),N=p(!1),nt=d=>{N.value=!0,s.value=d},L=()=>N.value=!1,j=()=>u.value.length=0,it=d=>{d?u.value=g.data.data.map(_=>_.id):j()},O=p(!1),P=p(!1),ut=()=>O.value=!0,I=()=>O.value=!1,Y=()=>P.value=!1,_t=["Service Order No","Customer","Serviceman","Status","Approved Progress"],ht=[{name:"To Do",value:"todo"},{name:"In Progress",value:"in_progress"},{name:"Done",value:"done"}],pt=[{label:"Service Order",url:null}],gt=d=>{D.Inertia.get(route("service-orders.index"),{search:d,status:g.status},{preserveState:!0,preserveScroll:!0})},mt=()=>{D.Inertia.get(route("service-orders.index"),{search:g.search,status:g.status},{preserveState:!0,preserveScroll:!0})},vt=()=>{D.Inertia.delete(route("service-orders.destroy",u.value),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{Y(),j()}})},yt=()=>{D.Inertia.put(route("service-orders.done"),{data:u.value},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{I(),j()}})};return(d,_)=>(l(),ot(wt,{title:"Service Order"},{header:r(()=>[At,n(zt,{links:pt})]),default:r(()=>[e("div",Mt,[e("div",Nt,[e("div",jt,[n($t,{columns:_t,checkbox:["supervisor"].includes(d.$page.props.user.role),action:["supervisor","foreman"].includes(d.$page.props.user.role),onSelectAllToggle:it,checkboxState:$(dt)},{header:r(()=>[e("div",Ot,[e("div",It,[n(St,{placeholder:"SO No or Customer",search:h.search,onSearch:gt},null,8,["search"]),at(e("select",{"onUpdate:modelValue":_[0]||(_[0]=o=>xt(status)?status.value=o:null),onChange:mt,id:"group",class:"border-gray-300 mt-1 block w-3/4 hidden md:block text-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm"},[Yt,(l(),c(S,null,z(ht,o=>e("option",{key:o.value,value:o.value},t(o.name),9,Vt)),64))],544),[[ft,h.status]])]),["supervisor"].includes(d.$page.props.user.role)?(l(),c("div",Bt,[n($(V),{href:d.route("service-orders.create")},{default:r(()=>[n(lt,null,{default:r(()=>[Lt]),_:1})]),_:1},8,["href"]),["supervisor","foreman","serviceman"].includes(d.$page.props.user.role)?(l(),ot(A,{key:0,disabled:u.value.length==0,onClick:ut},{default:r(()=>[Pt]),_:1},8,["disabled"])):C("",!0)])):C("",!0)])]),tbody:r(()=>[(l(!0),c(S,null,z(h.data.data,o=>{var m,v,y,b,f,x;return l(),c("tr",{key:o,class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[["supervisor"].includes(d.$page.props.user.role)?(l(),c("td",Tt,[e("div",Ft,[at(e("input",{id:`checkbox-table-${o.id}`,value:o.id,"onUpdate:modelValue":_[1]||(_[1]=k=>u.value=k),type:"checkbox",class:"w-4 h-4 text-yellow-600 bg-gray-100 border-gray-300 rounded focus:ring-yellow-500 dark:focus:ring-yellow-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,Ut),[[kt,u.value]]),e("label",{for:`checkbox-table-${o.id}`,class:"sr-only"},"checkbox",8,qt)])])):C("",!0),e("th",Et,[e("span",{textContent:t(o.service_order_no),onClick:k=>nt(o)},null,8,Kt)]),e("td",Rt,t(o.customer_name),1),e("td",Wt,t(o.serviceman?(m=o.serviceman)==null?void 0:m.name:"-"),1),e("td",Gt,t(o.service_order_status),1),["customer","sales_support"].includes(d.$page.props.user.role)?(l(),c("td",Ht,t((v=o.control_card_accepted)==null?void 0:v.length),1)):d.$page.props.user.role=="supervisor"?(l(),c("td",Jt,t(`${(y=o.control_card_accepted)==null?void 0:y.length}/${(b=o.control_card_approved)==null?void 0:b.length}`),1)):(l(),c("td",Qt,t(`${(f=o.control_card_accepted)==null?void 0:f.length}/${(x=o.control_card)==null?void 0:x.length}`),1)),["supervisor","foreman"].includes(d.$page.props.user.role)?(l(),c("td",Xt,[n($(V),{class:"font-medium text-yellow-600 dark:text-yellow-500 hover:underline",href:d.route("service-orders.edit",o.id)},{default:r(()=>[Zt]),_:2},1032,["href"])])):C("",!0)])}),128))]),footer:r(()=>[n(Ct,{links:h.data.links,next:h.data.next_page_url,prev:h.data.prev_page_url},null,8,["links","next","prev"])]),_:1},8,["checkbox","action","checkboxState"])])])]),n(B,{show:N.value,onClose:L},{title:r(()=>[e("div",es,[ts,e("label",ss,[n(Dt,{checked:M.value,"onUpdate:checked":_[2]||(_[2]=o=>M.value=o),name:"timeline"},null,8,["checked"]),os])])]),content:r(()=>{var o,m,v,y,b,f,x,k,T,F,U,q,E,K,R,W,G,H,J,Q,X,Z,ee,te,se,oe,ae,re,le,ce,de,ne,ie,ue,_e,he,pe,ge,me,ve,ye,be,fe,xe,ke,we,ze,Se,Ce,$e,De,Ae,Me,Ne,je,Oe,Ie,Ye,Ve,Be,Le,Pe,Te,Fe,Ue,qe,Ee,Ke,Re,We,Ge,He,Je,Qe,Xe,Ze,et,tt,st;return[M.value?(l(),c("div",as,[["customer","sales_support"].includes(d.$page.props.user.role)?(l(),c("ol",rs,[(l(!0),c(S,null,z((o=s.value)==null?void 0:o.control_card_accepted,a=>{var w;return l(),c("li",{class:"mb-10 ml-4",key:a.id},[ls,e("time",cs,t(new Date(a.created_at).toLocaleString("id-ID")),1),e("h3",ds,t(a==null?void 0:a.special_note),1),e("p",ns,t((w=a==null?void 0:a.reporter)==null?void 0:w.name),1)])}),128))])):(l(),c("ol",is,[(l(!0),c(S,null,z((m=s.value)==null?void 0:m.control_card,a=>{var w;return l(),c("li",{class:"mb-10 ml-4",key:a.id},[us,e("time",_s,t(new Date(a.created_at).toLocaleString("id-ID")),1),e("h3",hs,t(a==null?void 0:a.special_note),1),e("p",ps,t((w=a==null?void 0:a.reporter)==null?void 0:w.name),1),e("p",null,[e("span",{class:rt(["bg-gray-100 text-gray-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:bg-gray-200 dark:text-gray-900",{"bg-yellow-100 text-yellow-800 dark:bg-yellow-200 dark:text-yellow-900":a==null?void 0:a.is_approved}])},"Approved by Foreman",2),e("span",{class:rt(["bg-gray-100 text-gray-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:bg-gray-200 dark:text-gray-900",{"bg-yellow-100 text-yellow-800 dark:bg-yellow-200 dark:text-yellow-900":a==null?void 0:a.is_accepted}])},"Approved by Supervisor",2)])])}),128))]))])):(l(),c("table",gs,[e("tbody",null,[e("tr",ms,[vs,e("td",null,t((y=(v=s.value)==null?void 0:v.service_order_no)!=null?y:"-"),1)]),e("tr",ys,[bs,e("td",null,t((f=(b=s.value)==null?void 0:b.service_order_status)!=null?f:"-"),1)]),e("tr",fs,[xs,e("td",null,t((T=(k=(x=s.value)==null?void 0:x.supervisor)==null?void 0:k.name)!=null?T:"-"),1)]),e("tr",ks,[ws,e("td",null,t((q=(U=(F=s.value)==null?void 0:F.foreman)==null?void 0:U.name)!=null?q:"-"),1)]),e("tr",zs,[Ss,e("td",null,t((R=(K=(E=s.value)==null?void 0:E.serviceman)==null?void 0:K.name)!=null?R:"-"),1)]),e("tr",Cs,[$s,e("td",null,t((G=(W=s.value)==null?void 0:W.segment)!=null?G:"-"),1)]),e("tr",Ds,[As,e("td",null,t((J=(H=s.value)==null?void 0:H.operation)!=null?J:"-"),1)]),e("tr",Ms,[Ns,e("td",null,t((X=(Q=s.value)==null?void 0:Q.job_code)!=null?X:"-"),1)]),e("tr",js,[Os,e("td",null,t((ee=(Z=s.value)==null?void 0:Z.component_code)!=null?ee:"-"),1)]),e("tr",Is,[Ys,e("td",null,t((se=(te=s.value)==null?void 0:te.smu)!=null?se:"-"),1)]),e("tr",Vs,[Bs,e("td",null,t((oe=s.value)!=null&&oe.warranty?"Yes":"No"),1)]),(ae=s.value)!=null&&ae.warranty?(l(),c("tr",Ls,[Ps,e("td",null,t((le=(re=s.value)==null?void 0:re.warranty_text)!=null?le:"-"),1)])):C("",!0),e("tr",Ts,[Fs,e("td",null,t((de=(ce=s.value)==null?void 0:ce.pip_psp)!=null?de:"-"),1)]),e("tr",Us,[qs,e("td",null,t((ie=(ne=s.value)==null?void 0:ne.job_control)!=null?ie:"-"),1)]),e("tr",Es,[Ks,e("td",null,t((_e=(ue=s.value)==null?void 0:ue.business_area)!=null?_e:"-"),1)]),e("tr",Rs,[Ws,e("td",null,t((pe=(he=s.value)==null?void 0:he.customer_name)!=null?pe:"-"),1)]),e("tr",Gs,[Hs,e("td",null,t((me=(ge=s.value)==null?void 0:ge.service_team)!=null?me:"-"),1)]),e("tr",Js,[Qs,e("td",null,t((ye=(ve=s.value)==null?void 0:ve.group_number)!=null?ye:"-"),1)]),e("tr",Xs,[Zs,e("td",null,t((fe=(be=s.value)==null?void 0:be.customer_no)!=null?fe:"-"),1)]),e("tr",eo,[to,e("td",null,t((ke=(xe=s.value)==null?void 0:xe.make)!=null?ke:"-"),1)]),e("tr",so,[oo,e("td",null,t((ze=(we=s.value)==null?void 0:we.model)!=null?ze:"-"),1)]),e("tr",ao,[ro,e("td",null,t((Ce=(Se=s.value)==null?void 0:Se.serial_number)!=null?Ce:"-"),1)]),e("tr",lo,[co,e("td",null,t((De=($e=s.value)==null?void 0:$e.arrg_no)!=null?De:"-"),1)]),e("tr",no,[io,e("td",null,t((Me=(Ae=s.value)==null?void 0:Ae.std_hours)!=null?Me:"0")+" hours",1)]),e("tr",uo,[_o,e("td",null,t((je=(Ne=s.value)==null?void 0:Ne.job_description)!=null?je:"-"),1)]),e("tr",ho,[po,e("td",null,t((Ie=(Oe=s.value)==null?void 0:Oe.labor_hours)!=null?Ie:"0")+" hours",1)]),e("tr",go,[mo,e("td",null,t((Ve=(Ye=s.value)==null?void 0:Ye.date_sent)!=null?Ve:"-"),1)]),e("tr",vo,[yo,e("td",null,t((Le=(Be=s.value)==null?void 0:Be.date_required)!=null?Le:"-"),1)]),e("tr",bo,[fo,e("td",null,t((Te=(Pe=s.value)==null?void 0:Pe.date_returned)!=null?Te:"-"),1)]),e("tr",xo,[ko,e("td",null,t((Ue=(Fe=s.value)==null?void 0:Fe.date_received_back)!=null?Ue:"-"),1)]),e("tr",wo,[zo,e("td",null,t((Ee=(qe=s.value)==null?void 0:qe.date_segment_closed)!=null?Ee:"-"),1)]),e("tr",So,[Co,e("td",null,t((Re=(Ke=s.value)==null?void 0:Ke.receive_by)!=null?Re:"-"),1)]),e("tr",$o,[Do,e("td",null,t((We=s.value)!=null&&We.surplus_part_returned?"Yes":"No"),1)]),e("tr",Ao,[Mo,e("td",null,t((Ge=s.value)!=null&&Ge.sims_completed?"Yes":"No"),1)]),e("tr",No,[jo,e("td",null,t((Je=(He=s.value)==null?void 0:He.note)!=null?Je:"-"),1)]),e("tr",Oo,[Io,e("td",null,t((Xe=(Qe=s.value)==null?void 0:Qe.deliver_to)!=null?Xe:"-"),1)]),e("tr",Yo,[Vo,e("td",null,t((et=(Ze=s.value)==null?void 0:Ze.return_to)!=null?et:"-"),1)]),e("tr",Bo,[Lo,e("td",null,t((tt=s.value)!=null&&tt.signed_1?"Yes":"No"),1)]),e("tr",Po,[To,e("td",null,t((st=s.value)!=null&&st.signed_2?"Yes":"No"),1)]),e("tr",Fo,[Uo,e("td",null,[e("ul",null,[(l(!0),c(S,null,z(s.value.servicemen,a=>(l(),c("li",{key:a.id},t(a.name),1))),128))])])])])]))]}),footer:r(()=>[n(A,{onClick:L},{default:r(()=>[qo]),_:1}),n($(V),{href:d.route("control-cards.index",s.value.id)},{default:r(()=>[n(lt,{class:"ml-3"},{default:r(()=>[Eo]),_:1})]),_:1},8,["href"])]),_:1},8,["show"]),n(B,{show:O.value,onClose:I},{title:r(()=>[Ko]),content:r(()=>[i(" Are you sure you want to mark as done the selected service orders? You selected "+t(u.value.length)+" service orders. ",1)]),footer:r(()=>[n(A,{onClick:I},{default:r(()=>[Ro]),_:1}),n(ct,{class:"ml-3",onClick:yt},{default:r(()=>[Wo]),_:1})]),_:1},8,["show"]),n(B,{show:P.value,onClose:Y},{title:r(()=>[Go]),content:r(()=>[i(" Are you sure you want to delete the selected accounts? Once the accounts are deleted, all of their resources and data will be permanently deleted. You selected "+t(u.value.length)+" accounts. ",1)]),footer:r(()=>[n(A,{onClick:Y},{default:r(()=>[Ho]),_:1}),n(ct,{class:"ml-3",onClick:vt},{default:r(()=>[Jo]),_:1})]),_:1},8,["show"])]),_:1}))}};export{ca as default};
