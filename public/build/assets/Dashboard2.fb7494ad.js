import{d as w,o as a,e as s,a as e,b as y,w as n,g as m,F as g,h as x,L as D,t as o,n as u,G as C,f as i,i as b}from"./app.3132a195.js";import{a as L}from"./DialogModal.6a25e617.js";import{_ as S}from"./SecondaryButton.672a0479.js";const $={class:"p-4 w-full bg-white rounded-lg border shadow-xl sm:p-8"},A={class:"flex justify-between items-center mb-4"},N=e("h5",{class:"text-xl font-semibold leading-none text-gray-900 dark:text-white"},"Currently Progressing",-1),V=b(" View all "),j={class:"flow-root"},B={role:"list",class:"divide-y divide-gray-200 dark:divide-gray-700"},F={class:"flex items-center space-x-4"},I={class:"flex-1 min-w-0"},M=["onClick"],O={class:"w-full bg-gray-300 h-6 mt-2 rounded-full dark:bg-gray-700"},T={class:"text-xs mt-1 text-gray-500"},z=b(" Work Progress "),E={key:0,class:"relative border-l border-gray-200 dark:border-gray-700"},P=e("div",{class:"absolute w-3 h-3 bg-gray-200 rounded-full mt-1.5 -left-1.5 border border-white dark:border-gray-900 dark:bg-gray-700"},null,-1),R={class:"mb-1 text-sm font-normal leading-none text-gray-400 dark:text-gray-500"},G={class:"text-lg font-semibold text-gray-900 dark:text-white"},W={class:"text-base font-normal text-gray-500 dark:text-gray-400"},q={class:"text-xs font-normal text-gray-400 dark:text-gray-400"},H={key:0},J=["src"],K=["href"],Q={key:1,class:"relative border-l border-gray-200 dark:border-gray-700"},U=e("div",{class:"absolute w-3 h-3 bg-gray-200 rounded-full mt-1.5 -left-1.5 border border-white dark:border-gray-900 dark:bg-gray-700"},null,-1),X={class:"mb-1 text-sm font-normal leading-none text-gray-400 dark:text-gray-500"},Y={class:"text-lg font-semibold text-gray-900 dark:text-white"},Z={class:"text-base font-normal text-gray-500 dark:text-gray-400"},tt={class:"text-xs font-normal text-gray-400 dark:text-gray-400"},et={key:0},rt=["src"],at=["href"],st=b(" Close "),gt={__name:"Dashboard2",setup(ot){const f=/(\.jpg|\.jpeg|\.png|\.gif)$/i,_=w({}),p=w(!1),v=d=>{p.value=!0,_.value=d},k=()=>p.value=!1;return(d,dt)=>(a(),s(g,null,[e("div",$,[e("div",A,[N,y(m(D),{href:d.route("service-orders.index",{status:"in_progress"}),class:"text-sm font-medium text-yellow-600 hover:underline dark:text-yellow-500"},{default:n(()=>[V]),_:1},8,["href"])]),e("div",j,[e("ul",B,[(a(!0),s(g,null,x(d.$page.props.service_order.in_progress,r=>(a(),s("li",{class:"py-3 sm:py-4",key:r.id},[e("div",F,[e("div",I,[e("p",{class:"text-sm font-medium cursor-pointer text-yellow-600 truncate dark:text-white",onClick:h=>v(r)},o(r.service_order_no),9,M),e("div",O,[e("div",{class:u([{"bg-red-500":r.progress_percentage<20&&r.progress_percentage>=0,"bg-orange-500":r.progress_percentage<60&&r.progress_percentage>=20,"bg-yellow-400":r.progress_percentage<80&&r.progress_percentage>=60,"bg-green-500":r.progress_percentage<100&&r.progress_percentage>=80},"bg-orange-500 text-xs h-6 shim-green font-semibold text-orange-100 text-center p-1.5 leading-none rounded-full"]),style:C({width:`${r.progress_percentage}%`})},o(r.progress_percentage)+"%",7),e("p",T,"Last updated: "+o(new Date(r.updated_at).toLocaleString("id-ID")),1)])])])]))),128))])])]),y(L,{show:p.value,onClose:k},{title:n(()=>[z]),content:n(()=>{var r,h;return[e("div",null,[["customer","sales_support"].includes(d.$page.props.user.role)?(a(),s("ol",E,[(a(!0),s(g,null,x((r=_.value)==null?void 0:r.control_card_accepted,t=>{var c,l;return a(),s("li",{class:"mb-10 ml-4",key:t.id},[P,e("time",R,o(new Date(t.created_at).toLocaleString("id-ID")),1),e("h3",G,o(t==null?void 0:t.special_note),1),e("p",W,o(t==null?void 0:t.comment),1),e("p",q,"Reported by: "+o((c=t==null?void 0:t.reporter)==null?void 0:c.name),1),(l=t.attachments)!=null&&l.length?(a(),s("div",H,[f.exec(t.attachments[0].path)?(a(),s("img",{key:0,src:t.attachments[0].path,alt:"Attachment",class:"w-full my-2 rounded-lg"},null,8,J)):(a(),s("a",{key:1,href:t.attachments[0].path,class:"text-xs text-orange-500",target:"_blank"},"Open Attachment in New Tab",8,K))])):i("",!0)])}),128))])):(a(),s("ol",Q,[(a(!0),s(g,null,x((h=_.value)==null?void 0:h.control_card,t=>{var c,l;return a(),s("li",{class:"mb-10 ml-4",key:t.id},[U,e("time",X,o(new Date(t.created_at).toLocaleString("id-ID")),1),e("h3",Y,o(t==null?void 0:t.special_note),1),e("p",Z,o(t==null?void 0:t.comment),1),e("p",tt,"Reported by: "+o((c=t==null?void 0:t.reporter)==null?void 0:c.name),1),(l=t.attachments)!=null&&l.length?(a(),s("div",et,[f.exec(t.attachments[0].path)?(a(),s("img",{key:0,src:t.attachments[0].path,alt:"Attachment",class:"w-full my-2 rounded-lg"},null,8,rt)):(a(),s("a",{key:1,href:t.attachments[0].path,class:"text-xs text-orange-500",target:"_blank"},"Open Attachment in New Tab",8,at))])):i("",!0),e("p",null,[e("span",{class:u(["bg-gray-100 text-gray-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:bg-gray-200 dark:text-gray-900",{"bg-yellow-100 text-yellow-800 dark:bg-yellow-200 dark:text-yellow-900":t==null?void 0:t.is_approved}])},"Approved by Foreman",2),e("span",{class:u(["bg-gray-100 text-gray-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:bg-gray-200 dark:text-gray-900",{"bg-yellow-100 text-yellow-800 dark:bg-yellow-200 dark:text-yellow-900":t==null?void 0:t.is_accepted}])},"Approved by Supervisor",2)])])}),128))]))])]}),footer:n(()=>[y(S,{onClick:k},{default:n(()=>[st]),_:1})]),_:1},8,["show"])],64))}};export{gt as default};
