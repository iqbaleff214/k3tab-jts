import{d as pe,u as ve,D as ge,k as fe,o as _,c as be,w as u,a as t,b as r,g as s,n as ne,t as g,e as p,v as Ve,K as Oe,F as ye,h as we,i as v}from"./app.3132a195.js";import{_ as ke}from"./ActionMessage.73e00fa8.js";import{_ as xe}from"./Button.914d69d4.js";import{_ as Se}from"./FormSection.cb601c36.js";import{_ as m}from"./Input.4f7714c1.js";import{_ as Ue}from"./InputSelect.a05cddc0.js";import{_ as me}from"./Checkbox.e19d533d.js";import{_ as n}from"./InputError.c8bfdd85.js";import{_ as d}from"./Label.34afe86d.js";import"./SectionTitle.ff08868c.js";import"./_plugin-vue_export-helper.cdc0426e.js";const je=v(" Edit Service Order "),ze=v(" Edit your service order data. "),he={class:"col-span-6 sm:col-span-3"},Ne={class:"col-span-6 sm:col-span-3"},Ce={class:"col-span-6 sm:col-span-3"},$e={class:"flex items-center mt-3"},qe={class:"ml-2 text-sm text-gray-600"},Fe={key:0,class:"col-span-6 sm:col-span-3"},Pe={key:1,class:"col-span-6 sm:col-span-3"},Be=["value"],Ee={class:"col-span-6 sm:col-span-3"},De={class:"col-span-6 sm:col-span-3"},Me={class:"col-span-6 sm:col-span-3"},Te={class:"col-span-6 sm:col-span-3"},We={class:"col-span-6 sm:col-span-3"},Ie={class:"col-span-6 sm:col-span-3"},Ye={class:"col-span-6 sm:col-span-3"},Ae={class:"col-span-6 sm:col-span-3"},He={class:"col-span-6 sm:col-span-3"},Je={class:"col-span-6 sm:col-span-3"},Ke={class:"flex items-center mt-3"},Le={class:"ml-2 text-sm text-gray-600"},Ge={class:"col-span-6 sm:col-span-6"},Qe={class:"col-span-6 sm:col-span-6"},Re={class:"col-span-6 sm:col-span-6"},Xe={class:"col-span-6 sm:col-span-6"},Ze={class:"col-span-6 sm:col-span-6"},es={class:"col-span-6 sm:col-span-6"},ss=v(" Saved. "),rs=v(" Save "),ps={__name:"EditServiceOrderForm",props:{serviceOrder:Object},setup(ce){var f,b,V,O,y,w,k,x,S,U,j,z,h,N,C,$,q,F,P,B,E,D,M,T,W,I,Y,A,H,J,K,L,G,Q,R,X,Z,ee,se,re,oe,le;const l=ce,i=pe(null),ie=[{value:"Field",option:"Field"},{value:"Workshop",option:"Workshop"}],e=ve({id:(f=l.serviceOrder)==null?void 0:f.id,segment:(b=l.serviceOrder)==null?void 0:b.segment,operation:(V=l.serviceOrder)==null?void 0:V.operation,job_code:(O=l.serviceOrder)==null?void 0:O.job_code,component_code:(y=l.serviceOrder)==null?void 0:y.component_code,smu:(w=l.serviceOrder)==null?void 0:w.smu,warranty:(k=l.serviceOrder)==null?void 0:k.warranty,warranty_text:(x=l.serviceOrder)==null?void 0:x.warranty_text,pip_psp:(S=l.serviceOrder)==null?void 0:S.pip_psp,job_control:(U=l.serviceOrder)==null?void 0:U.job_control,business_area:(j=l.serviceOrder)==null?void 0:j.business_area,customer_name:(z=l.serviceOrder)==null?void 0:z.customer_name,service_team:(h=l.serviceOrder)==null?void 0:h.service_team,group_number:(N=l.serviceOrder)==null?void 0:N.group_number,customer_no:(C=l.serviceOrder)==null?void 0:C.customer_no,make:($=l.serviceOrder)==null?void 0:$.make,model:(q=l.serviceOrder)==null?void 0:q.model,serial_number:(F=l.serviceOrder)==null?void 0:F.serial_number,arrg_no:(P=l.serviceOrder)==null?void 0:P.arrg_no,std_hours:(B=l.serviceOrder)==null?void 0:B.std_hours,job_description:(E=l.serviceOrder)==null?void 0:E.job_description,labor_hours:(D=l.serviceOrder)==null?void 0:D.labor_hours,date_sent:(M=l.serviceOrder)==null?void 0:M.date_sent,date_required:(T=l.serviceOrder)==null?void 0:T.date_required,date_returned:(W=l.serviceOrder)==null?void 0:W.date_returned,date_received_back:(I=l.serviceOrder)==null?void 0:I.date_received_back,date_segment_closed:(Y=l.serviceOrder)==null?void 0:Y.date_segment_closed,receive_by:(A=l.serviceOrder)==null?void 0:A.receive_by,surplus_part_returned:(H=l.serviceOrder)==null?void 0:H.surplus_part_returned,sims_completed:(J=l.serviceOrder)==null?void 0:J.sims_completed,note:(K=l.serviceOrder)==null?void 0:K.note,deliver_to:(L=l.serviceOrder)==null?void 0:L.deliver_to,return_to:(G=l.serviceOrder)==null?void 0:G.return_to,signed_1:(Q=l.serviceOrder)==null?void 0:Q.signed_1,signed_2:(R=l.serviceOrder)==null?void 0:R.signed_2,status:(X=l.serviceOrder)==null?void 0:X.status,progress_percentage:(Z=l.serviceOrder)==null?void 0:Z.progress_percentage,customer_id:(ee=l.serviceOrder)==null?void 0:ee.customer_id,supervisor_id:(se=l.serviceOrder)==null?void 0:se.supervisor_id,foreman_id:(re=l.serviceOrder)==null?void 0:re.foreman_id,serviceman_id:(oe=l.serviceOrder)==null?void 0:oe.serviceman_id,new_customer:((le=l.serviceOrder)==null?void 0:le.customer_id)==null}),ue=()=>{e.transform(c=>{var o;return{...c,customer_id:c.new_customer?null:(o=i.value)==null?void 0:o.id}}).put(route("service-orders.update",l.serviceOrder.id),{preserveState:!0,preserveScroll:!0})},_e=()=>{var c,o;e.customer_no=(c=i.value)==null?void 0:c.salary_number,e.customer_name=(o=i.value)==null?void 0:o.name};return ge(()=>{const c=fe().props.value.customers;i.value=c.find(o=>o.id==e.customer_id)}),(c,o)=>(_(),be(Se,{onSubmitted:ue},{title:u(()=>[je]),description:u(()=>[ze]),form:u(()=>{var ae,te,de;return[t("div",he,[r(d,{for:"foreman_id",value:"Foreman PIC*"}),r(m,{id:"foreman_id",value:(te=(ae=l.serviceOrder)==null?void 0:ae.foreman)==null?void 0:te.name,type:"text",class:"mt-1 block w-full bg-gray-100",disabled:""},null,8,["value"]),r(n,{message:s(e).errors.foreman_id,class:"mt-2"},null,8,["message"])]),t("div",Ne,[r(d,{for:"customer_name",value:"Customer Name*",class:"capitalize"}),r(m,{id:"customer_name",modelValue:s(e).customer_name,"onUpdate:modelValue":o[0]||(o[0]=a=>s(e).customer_name=a),type:"text",readonly:!s(e).new_customer,class:ne([{"bg-gray-100":!s(e).new_customer},"mt-1 block w-full"])},null,8,["modelValue","readonly","class"]),r(n,{message:s(e).errors.customer_name,class:"mt-2"},null,8,["message"])]),t("div",Ce,[r(d,{for:"new_customer",value:"New Customer?",class:"capitalize"}),t("label",$e,[r(me,{checked:s(e).new_customer,"onUpdate:checked":o[1]||(o[1]=a=>s(e).new_customer=a)},null,8,["checked"]),t("span",qe,g(s(e).new_customer?"Yes":"No"),1)])]),s(e).new_customer?(_(),p("div",Fe,[r(d,{for:"customer_no",value:"Customer No*"}),r(m,{id:"customer_no",modelValue:s(e).customer_no,"onUpdate:modelValue":o[2]||(o[2]=a=>s(e).customer_no=a),type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),r(n,{message:s(e).errors.customer_no,class:"mt-2"},null,8,["message"])])):(_(),p("div",Pe,[r(d,{for:"customer_no",value:"Customer No*",class:"capitalize"}),Ve(t("select",{"onUpdate:modelValue":o[3]||(o[3]=a=>i.value=a),onChange:_e,id:"customer_no",class:"border-gray-300 mt-1 block w-full focus:border-yellow-300 focus:ring focus:ring-yellow-200 focus:ring-opacity-50 rounded-md shadow-sm"},[(_(!0),p(ye,null,we(c.$page.props.customers,a=>(_(),p("option",{key:a.id,value:a},g(a.name+" - "+a.salary_number),9,Be))),128))],544),[[Oe,i.value]]),r(n,{message:s(e).errors.customer_no,class:"mt-2"},null,8,["message"])])),t("div",Ee,[r(d,{for:"id",value:"Service Order"}),r(m,{id:"id",value:(de=l.serviceOrder)==null?void 0:de.service_order_no,type:"text",class:"mt-1 block w-full bg-gray-100",disabled:""},null,8,["value"]),r(n,{message:s(e).errors.id,class:"mt-2"},null,8,["message"])]),t("div",De,[r(d,{for:"job_description",value:"Job Description*",class:"capitalize"}),r(m,{id:"job_description",modelValue:s(e).job_description,"onUpdate:modelValue":o[4]||(o[4]=a=>s(e).job_description=a),type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),r(n,{message:s(e).errors.job_description,class:"mt-2"},null,8,["message"])]),t("div",Me,[r(d,{for:"model",value:"Sales model*",class:"capitalize"}),r(m,{id:"model",modelValue:s(e).model,"onUpdate:modelValue":o[5]||(o[5]=a=>s(e).model=a),type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),r(n,{message:s(e).errors.model,class:"mt-2"},null,8,["message"])]),t("div",Te,[r(d,{for:"serial_number",value:"serial number*",class:"capitalize"}),r(m,{id:"serial_number",modelValue:s(e).serial_number,"onUpdate:modelValue":o[6]||(o[6]=a=>s(e).serial_number=a),type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),r(n,{message:s(e).errors.serial_number,class:"mt-2"},null,8,["message"])]),t("div",We,[r(d,{for:"arrg_no",value:"Arr. No",class:"capitalize"}),r(m,{id:"arrg_no",modelValue:s(e).arrg_no,"onUpdate:modelValue":o[7]||(o[7]=a=>s(e).arrg_no=a),type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),r(n,{message:s(e).errors.arrg_no,class:"mt-2"},null,8,["message"])]),t("div",Ie,[r(d,{for:"smu",value:"SMU",class:"capitalize"}),r(m,{id:"smu",modelValue:s(e).smu,"onUpdate:modelValue":o[8]||(o[8]=a=>s(e).smu=a),type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),r(n,{message:s(e).errors.smu,class:"mt-2"},null,8,["message"])]),t("div",Ye,[r(d,{for:"operation",value:"Equipment Number",class:"capitalize"}),r(m,{id:"operation",modelValue:s(e).operation,"onUpdate:modelValue":o[9]||(o[9]=a=>s(e).operation=a),type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),r(n,{message:s(e).errors.operation,class:"mt-2"},null,8,["message"])]),t("div",Ae,[r(d,{for:"component_code",value:"component name",class:"capitalize"}),r(m,{id:"component_code",modelValue:s(e).component_code,"onUpdate:modelValue":o[10]||(o[10]=a=>s(e).component_code=a),type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),r(n,{message:s(e).errors.component_code,class:"mt-2"},null,8,["message"])]),t("div",He,[r(d,{for:"segment",value:"Segment*"}),r(m,{id:"segment",modelValue:s(e).segment,"onUpdate:modelValue":o[11]||(o[11]=a=>s(e).segment=a),type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),r(n,{message:s(e).errors.segment,class:"mt-2"},null,8,["message"])]),t("div",Je,[r(d,{for:"warranty",value:"Warranty?"}),t("label",Ke,[r(me,{checked:s(e).warranty,"onUpdate:checked":o[12]||(o[12]=a=>s(e).warranty=a),name:"warranty"},null,8,["checked"]),t("span",Le,g(s(e).warranty?"Yes":"No"),1)]),r(n,{message:s(e).errors.warranty,class:"mt-2"},null,8,["message"])]),t("div",Ge,[r(d,{for:"job_code",value:"job code*",class:"capitalize"}),r(m,{id:"job_code",modelValue:s(e).job_code,"onUpdate:modelValue":o[13]||(o[13]=a=>s(e).job_code=a),type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),r(n,{message:s(e).errors.job_code,class:"mt-2"},null,8,["message"])]),t("div",Qe,[r(d,{for:"pip_psp",value:"PIP/PSP",class:"capitalize"}),r(m,{id:"pip_psp",modelValue:s(e).pip_psp,"onUpdate:modelValue":o[14]||(o[14]=a=>s(e).pip_psp=a),type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),r(n,{message:s(e).errors.pip_psp,class:"mt-2"},null,8,["message"])]),t("div",Re,[r(d,{for:"service_team",value:"Service Team*",class:"capitalize"}),r(Ue,{id:"service_team",modelValue:s(e).service_team,"onUpdate:modelValue":o[15]||(o[15]=a=>s(e).service_team=a),options:ie,class:"mt-1 block w-full"},null,8,["modelValue"]),r(n,{message:s(e).errors.service_team,class:"mt-2"},null,8,["message"])]),t("div",Xe,[r(d,{for:"business_area",value:"Section",class:"capitalize"}),r(m,{id:"business_area",modelValue:s(e).business_area,"onUpdate:modelValue":o[16]||(o[16]=a=>s(e).business_area=a),type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),r(n,{message:s(e).errors.business_area,class:"mt-2"},null,8,["message"])]),t("div",Ze,[r(d,{for:"std_hours",value:"Std. Hours",class:"capitalize"}),r(m,{id:"std_hours",modelValue:s(e).std_hours,"onUpdate:modelValue":o[17]||(o[17]=a=>s(e).std_hours=a),type:"number",min:"0",class:"mt-1 block w-full"},null,8,["modelValue"]),r(n,{message:s(e).errors.std_hours,class:"mt-2"},null,8,["message"])]),t("div",es,[r(d,{for:"date_required",value:"date received",class:"capitalize"}),r(m,{id:"date_required",modelValue:s(e).date_required,"onUpdate:modelValue":o[18]||(o[18]=a=>s(e).date_required=a),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),r(n,{message:s(e).errors.date_required,class:"mt-2"},null,8,["message"])])]}),actions:u(()=>[r(ke,{on:s(e).recentlySuccessful,class:"mr-3"},{default:u(()=>[ss]),_:1},8,["on"]),r(xe,{class:ne({"opacity-25":s(e).processing}),disabled:s(e).processing},{default:u(()=>[rs]),_:1},8,["class","disabled"])]),_:1}))}};export{ps as default};
