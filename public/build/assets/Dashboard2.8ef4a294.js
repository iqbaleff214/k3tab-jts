import{d as k,o as a,e as s,a as t,b as y,w as c,g as v,F as g,h as u,L as D,t as o,n as x,G as C,f as w,i as b}from"./app.3552a682.js";import{a as L}from"./DialogModal.f5e76d37.js";import{_ as S}from"./SecondaryButton.a7a553b9.js";const $={class:"p-4 w-full bg-white rounded-lg border shadow-xl sm:p-8"},A={class:"flex justify-between items-center mb-4"},N=t("h5",{class:"text-xl font-semibold leading-none text-gray-900 dark:text-white"},"Currently Progressing",-1),V=b(" View all "),j={class:"flow-root"},B={role:"list",class:"divide-y divide-gray-200 dark:divide-gray-700"},F={class:"flex items-center space-x-4"},I={class:"flex-1 min-w-0"},M=["onClick"],O={class:"w-full bg-gray-300 h-6 mt-2 rounded-full dark:bg-gray-700"},T={class:"text-xs mt-1 text-gray-500"},z=b(" Work Progress "),E={key:0,class:"relative border-l border-gray-200 dark:border-gray-700"},P=t("div",{class:"absolute w-3 h-3 bg-gray-200 rounded-full mt-1.5 -left-1.5 border border-white dark:border-gray-900 dark:bg-gray-700"},null,-1),G={class:"mb-1 text-sm font-normal leading-none text-gray-400 dark:text-gray-500"},W={class:"text-lg font-semibold text-gray-900 dark:text-white"},q={class:"text-base font-normal text-gray-500 dark:text-gray-400"},H={key:0},J=["src"],K=["href"],Q={key:1,class:"relative border-l border-gray-200 dark:border-gray-700"},R=t("div",{class:"absolute w-3 h-3 bg-gray-200 rounded-full mt-1.5 -left-1.5 border border-white dark:border-gray-900 dark:bg-gray-700"},null,-1),U={class:"mb-1 text-sm font-normal leading-none text-gray-400 dark:text-gray-500"},X={class:"text-lg font-semibold text-gray-900 dark:text-white"},Y={class:"text-base font-normal text-gray-500 dark:text-gray-400"},Z={key:0},ee=["src"],te=["href"],re=b(" Close "),ne={__name:"Dashboard2",setup(ae){const i=/(\.jpg|\.jpeg|\.png|\.gif)$/i,_=k({}),p=k(!1),m=d=>{p.value=!0,_.value=d},f=()=>p.value=!1;return(d,se)=>(a(),s(g,null,[t("div",$,[t("div",A,[N,y(v(D),{href:d.route("service-orders.index",{status:"in_progress"}),class:"text-sm font-medium text-yellow-600 hover:underline dark:text-yellow-500"},{default:c(()=>[V]),_:1},8,["href"])]),t("div",j,[t("ul",B,[(a(!0),s(g,null,u(d.$page.props.service_order.in_progress,r=>(a(),s("li",{class:"py-3 sm:py-4",key:r.id},[t("div",F,[t("div",I,[t("p",{class:"text-sm font-medium cursor-pointer text-yellow-600 truncate dark:text-white",onClick:h=>m(r)},o(r.service_order_no),9,M),t("div",O,[t("div",{class:x([{"bg-red-500":r.progress_percentage<20&&r.progress_percentage>=0,"bg-orange-500":r.progress_percentage<60&&r.progress_percentage>=20,"bg-yellow-400":r.progress_percentage<80&&r.progress_percentage>=60,"bg-green-500":r.progress_percentage<100&&r.progress_percentage>=80},"bg-orange-500 text-xs h-6 shim-green font-semibold text-orange-100 text-center p-1.5 leading-none rounded-full"]),style:C({width:`${r.progress_percentage}%`})},o(r.progress_percentage)+"%",7),t("p",T,"Last updated: "+o(new Date(r.updated_at).toLocaleString("id-ID")),1)])])])]))),128))])])]),y(L,{show:p.value,onClose:f},{title:c(()=>[z]),content:c(()=>{var r,h;return[t("div",null,[["customer","sales_support"].includes(d.$page.props.user.role)?(a(),s("ol",E,[(a(!0),s(g,null,u((r=_.value)==null?void 0:r.control_card_accepted,e=>{var l,n;return a(),s("li",{class:"mb-10 ml-4",key:e.id},[P,t("time",G,o(new Date(e.created_at).toLocaleString("id-ID")),1),t("h3",W,o(e==null?void 0:e.special_note),1),t("p",q,o((l=e==null?void 0:e.reporter)==null?void 0:l.name),1),(n=e.attachments)!=null&&n.length?(a(),s("div",H,[i.exec(e.attachments[0].path)?(a(),s("img",{key:0,src:e.attachments[0].path,alt:"Attachment",class:"w-full my-2 rounded-lg"},null,8,J)):(a(),s("a",{key:1,href:e.attachments[0].path,class:"text-xs text-orange-500",target:"_blank"},"Open Attachment in New Tab",8,K))])):w("",!0)])}),128))])):(a(),s("ol",Q,[(a(!0),s(g,null,u((h=_.value)==null?void 0:h.control_card,e=>{var l,n;return a(),s("li",{class:"mb-10 ml-4",key:e.id},[R,t("time",U,o(new Date(e.created_at).toLocaleString("id-ID")),1),t("h3",X,o(e==null?void 0:e.special_note),1),t("p",Y,o((l=e==null?void 0:e.reporter)==null?void 0:l.name),1),(n=e.attachments)!=null&&n.length?(a(),s("div",Z,[i.exec(e.attachments[0].path)?(a(),s("img",{key:0,src:e.attachments[0].path,alt:"Attachment",class:"w-full my-2 rounded-lg"},null,8,ee)):(a(),s("a",{key:1,href:e.attachments[0].path,class:"text-xs text-orange-500",target:"_blank"},"Open Attachment in New Tab",8,te))])):w("",!0),t("p",null,[t("span",{class:x(["bg-gray-100 text-gray-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:bg-gray-200 dark:text-gray-900",{"bg-yellow-100 text-yellow-800 dark:bg-yellow-200 dark:text-yellow-900":e==null?void 0:e.is_approved}])},"Approved by Foreman",2),t("span",{class:x(["bg-gray-100 text-gray-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:bg-gray-200 dark:text-gray-900",{"bg-yellow-100 text-yellow-800 dark:bg-yellow-200 dark:text-yellow-900":e==null?void 0:e.is_accepted}])},"Approved by Supervisor",2)])])}),128))]))])]}),footer:c(()=>[y(S,{onClick:f},{default:c(()=>[re]),_:1})]),_:1},8,["show"])],64))}};export{ne as default};
